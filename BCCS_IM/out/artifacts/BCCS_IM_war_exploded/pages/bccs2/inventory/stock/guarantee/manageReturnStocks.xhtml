<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:cbs="http://java.sun.com/jsf/composite/tags"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:pe="http://primefaces.org/ui/extensions"
        template="../../../sentinel/template.xhtml">
    <ui:define name="title">#{lang['mn.return.stock']}</ui:define>
    <ui:define name="featureName">#{lang['mn.return.stock']}</ui:define>
    <ui:define name="content">
        <h:form id="frmStaffReturn">
            <p:outputPanel styleClass="Container100">
                <p:outputPanel class="ContainerIndent mg-top-0 bg-panel">
                    <p:messages id="mesages" showSummary="false" showDetail="true" closable="true"/>
                </p:outputPanel>
                <p:outputPanel id="pnView" styleClass="Container100">
                    <p:focus for="pnView"/>

                    <p:outputPanel styleClass="Container100" id="pnSearch"
                                   rendered="#{!manageReturnStockController.viewRquestDetail and !manageReturnStockController.showSearch}">

                        <div class="ContainerIndent mg-top-0">
                            <cbs:panel classForToggle="pnSearch" toggle="true"
                                       titleHeader="#{lang['mn.stock.limit.info.range.time.promotion']}"/>

                            <div class="Container100 mg-top-0 bg-panel">
                                <p:outputPanel styleClass="Container100 pnSearch" id="pnViewData">
                                    <div class="ContainerIndent">
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-4">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['stock.rescue.warranty.stock.rescue.request.code']}"
                                                               for="requestCodeTxt"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid">
                                                <p:inputText id="requestCodeTxt"
                                                             maxlength="50"
                                                             onblur="this.value = this.value.trim();"
                                                             value="#{manageReturnStockController.stockRequestDTOSearch.requestCode}"
                                                             placeholder="#{lang['stock.rescue.warranty.stock.rescue.request.code.placeholder']}"/>
                                            </div>
                                        </div>
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50  mg-left-15 pd-top-7">
                                                <p:outputLabel value="#{lang['create.note.from.date']}"
                                                               styleClass="lb-sentinel"
                                                               for="fromDate"/>
                                            </div>
                                            <div class="Container60 Responsive50  ui-fluid">
                                                <p:calendar
                                                        mask="true"
                                                        pattern="#{lang['common.datetime.format']}"
                                                        converterMessage="#{lang['invalid.date.message']}"
                                                        validatorMessage="#{lang['start.date.validate.message']}"
                                                        value="#{manageReturnStockController.stockRequestDTOSearch.fromDate}"
                                                        placeholder="#{lang['common.datetime.format']}"
                                                        required="true"
                                                        requiredMessage="#{lang['mn.stock.from.date.not.blank']}"
                                                        styleClass="fromDate"
                                                        id="fromDate">
                                                    <f:convertDateTime type="date"
                                                                       pattern="#{lang['common.datetime.format']}"/>
                                                </p:calendar>
                                                <p:message for="fromDate"/>
                                            </div>
                                        </div>
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel value="#{lang['create.note.to.date']}" for="toDate"
                                                               styleClass="lb-sentinel"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid">
                                                <p:calendar id="toDate"
                                                            mask="true"
                                                            pattern="#{lang['common.datetime.format']}"
                                                            converterMessage="#{lang['invalid.date.message']}"
                                                            validatorMessage="#{lang['start.date.validate.message']}"
                                                            value="#{manageReturnStockController.stockRequestDTOSearch.toDate}"
                                                            required="true"
                                                            styleClass="toDate"
                                                            placeholder="#{lang['create.note.to.date.placeholder']}"
                                                            requiredMessage="#{lang['mn.stock.to.date.not.blank']}">
                                                    <f:convertDateTime type="date"
                                                                       pattern="#{lang['common.datetime.format']}"/>
                                                </p:calendar>
                                                <p:message for="toDate"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ContainerIndent">
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15  pd-top-4">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['common.status']}"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid ">
                                                <p:selectOneMenu id="status"
                                                                 value="#{manageReturnStockController.stockRequestDTOSearch.status}">
                                                    <f:selectItem itemLabel="#{lang['common.selectOneMenu.select']}"
                                                                  escape="true"/>
                                                    <f:selectItem
                                                            itemLabel="#{lang['mn.stock.branch.btn.create.request']}"
                                                            itemValue="0"/>
                                                    <f:selectItem itemLabel="#{lang['debit.request.status3']}"
                                                                  itemValue="1"/>
                                                    <f:selectItem itemLabel="#{lang['debit.select.status0']}"
                                                                  itemValue="2"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="Container33 Responsive"/>


                                        <div class="Container33 Responsive"/>


                                    </div>
                                    <div class="ContainerIndent TexAlCenter">
                                        <p:commandButton value="#{lang['create.note.search']}"
                                                         process="@this,@([id$=pnSearch])"
                                                         actionListener="#{manageReturnStockController.doSearch}"
                                                         update="@form"/>
                                        <p:commandButton value="#{lang['common.reset']}" process="@this" update="@form"
                                                         styleClass="mg-left-5"
                                                         actionListener="#{manageReturnStockController.doResetSearch}"/>
                                        <p:commandButton value="#{lang['mn.stock.branch.btn.create.request']}"
                                                         action="#{manageReturnStockController.doCreateRequest}"
                                                         process="@this" update="@form"
                                                         styleClass="mg-left-5"/>
                                    </div>
                                </p:outputPanel>
                            </div>
                        </div>
                        <div class="ContainerIndent mg-top-0">
                            <p:outputPanel id="pnListSearch" styleClass="Container100">
                                <cbs:panel classForToggle="pnListSearch" toggle="true"
                                           titleHeader="#{lang['mn.stock.list.result.search']}"/>

                                <div class="pnListSearch Container">
                                    <p:dataTable
                                            id="lstStockOrderAgent"
                                            var="stockRequest"
                                            rowKey="#{stockRequest.stockRequestId}"
                                            resizableColumns="true"
                                            reflow="false"
                                            paginator="#{lang['common.paging.paginator']}"
                                            rows="#{lang['common.paging.rows.default']}"
                                            rowsPerPageTemplate="#{lang['common.paging.rowsPerPageTemplate']}"
                                            paginatorAlwaysVisible="#{lang['common.paging.paginatorAlwaysVisible']}"
                                            paginatorPosition="#{lang['common.paging.paginatorPosition']}"
                                            paginatorTemplate="#{lang['common.paging.paginatorTemplate']}"
                                            currentPageReportTemplate="#{lang['common.paging.currentPageReportTemplate']}"
                                            emptyMessage="#{lang['common.empty.records']}"
                                            selection="#{manageReturnStockController.stockRequestDTOSelect}"
                                            value="#{manageReturnStockController.lsRequestSearch}">
                                        <p:ajax update="@form" event="toggleSelect"/>
                                        <p:ajax update="@form" event="rowSelectCheckbox"/>
                                        <p:ajax update="@form" event="rowUnselectCheckbox"/>
                                        <p:column styleClass="col-left" sortBy="#{stockRequest.requestCode}">
                                            <f:facet name="header">
                                                <h:outputText
                                                        value="#{lang['stock.rescue.warranty.stock.rescue.request.code']}"
                                                        title="#{lang['stock.rescue.warranty.stock.rescue.request.code']}"/>
                                            </f:facet>
                                            <p:outputLabel value="#{stockRequest.requestCode}"
                                                           title="#{stockRequest.requestCode}"/>
                                        </p:column>
                                        <p:column styleClass="col-left" sortBy="#{stockRequest.ownerCode}">
                                            <f:facet name="header">
                                                <h:outputText value="#{lang['mn.balance.stock.request.shop']}"
                                                              title="#{lang['mn.balance.stock.request.shop']}"/>
                                            </f:facet>
                                            <p:outputLabel value="#{stockRequest.ownerCode}-#{stockRequest.ownerName}"
                                                           title="#{stockRequest.ownerCode}-#{stockRequest.ownerName}"/>
                                        </p:column>
                                        <p:column sortBy="#{stockRequest.statusName}">
                                            <f:facet name="header">
                                                <h:outputText value="#{lang['stock.rescue.warranty.create.status']}"
                                                              title="#{lang['stock.rescue.warranty.create.status']}"/>
                                            </f:facet>
                                            <p:outputLabel value="#{stockRequest.statusName}"
                                                           title="#{stockRequest.statusName}"/>
                                        </p:column>
                                        <p:column sortBy="#{stockRequest.createDatetime}">
                                            <f:facet name="header">
                                                <h:outputText value="#{lang['stock.rescue.warranty.create.date']}"
                                                              title="#{lang['stock.rescue.warranty.create.date']}"/>
                                            </f:facet>
                                            <p:outputLabel value="#{stockRequest.createDatetime}"
                                                           title="#{stockRequest.createDatetime}">
                                                <f:convertDateTime pattern="#{lang['common.datetime.format']}"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column sortBy="#{stockRequest.createUser}">
                                            <f:facet name="header">
                                                <h:outputText value="#{lang['export.order.create.whom']}"
                                                              title="#{lang['export.order.create.whom']}"/>
                                            </f:facet>
                                            <p:outputLabel value="#{stockRequest.createUser}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <f:facet name="header">
                                                <h:outputText value="#{lang['create.note.effect']}"
                                                              title="#{lang['create.note.effect']}"/>
                                            </f:facet>
                                            <p:commandLink styleClass="fa icon-zoom-in Fs16 blue icon-link"
                                                           resetValues="true"
                                                           update="@form" process="@this"
                                                           title="#{lang['common.view.detail.trans']}"
                                                           actionListener="#{manageReturnStockController.doShowInfoOrderDetail(stockRequest)}"/>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </p:outputPanel>
                        </div>
                    </p:outputPanel>

                    <p:outputPanel styleClass="Container100" id="requestDetail"
                                   rendered="#{manageReturnStockController.viewRquestDetail}">
                        <div class="ContainerIndent mg-top-0">
                            <!--Start vung thong tin phieu xuat-->
                            <div class="Container100 mg-top-0">
                                <cbs:panel classForToggle="requestDetail" toggle="true"
                                           titleHeader="#{lang['export.order.view.export.field']}"/>

                                <div class="Container100 mg-top-0 bg-panel">
                                    <div class="ContainerIndent ">
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-0">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['stock.rescue.warranty.stock.rescue.request.code']}"
                                                               for="txtRequestCode"/>
                                            </div>
                                            <div class="Container60 Responsive50">
                                                <p:outputLabel id="txtRequestCode"
                                                               value="#{manageReturnStockController.inputStockTransDTO.request}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ContainerIndent ">
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['export.order.code.field']}"
                                                               for="codeExportTxt"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid">
                                                <p:inputText id="codeExportTxt"
                                                             required="true"
                                                             maxlength="50"
                                                             requiredMessage="#{lang['export.order.transCode.require.msg']}"
                                                             placeholder="#{lang['export.order.code.field.placehoder']}"
                                                             value="#{manageReturnStockController.inputStockTransDTO.actionCode}">
                                                    <pe:keyFilter for="codeExportTxt" regEx="/[0-9A-Z_]/i"/>
                                                </p:inputText>
                                                <p:message for="codeExportTxt"/>
                                            </div>
                                        </div>
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['export.order.by.whom']}"
                                                               for="whomExportTxt"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid pd-top-7">
                                                <p:outputLabel id="whomExportTxt"
                                                               readonly="true"
                                                               title="#{manageReturnStockController.inputStockTransDTO.userCreate}"
                                                               value="#{manageReturnStockController.inputStockTransDTO.userCreate}"/>
                                            </div>
                                        </div>
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['export.order.day']}"
                                                               for="dateExportTxt"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid  pd-top-7">
                                                <p:outputLabel id="dateExportTxt"
                                                               styleClass="lb-sentinel-bold break-word"
                                                               readonly="true"
                                                               value="#{manageReturnStockController.inputStockTransDTO.createDatetime}">
                                                    <f:convertDateTime pattern="#{lang['common.datetime.format']}"/>
                                                </p:outputLabel>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ContainerIndent ">
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['export.order.stock']}"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel-bold break-word"
                                                               title="#{manageReturnStockController.inputStockTransDTO.fromOwnerName}"
                                                               value="#{manageReturnStockController.inputStockTransDTO.fromOwnerName}"
                                                               readonly="true"/>
                                            </div>

                                        </div>
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['export.order.stock.receive.product']}"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel-bold break-word"
                                                               title="#{manageReturnStockController.inputStockTransDTO.toOwnerName}"
                                                               value="#{manageReturnStockController.inputStockTransDTO.toOwnerName}"
                                                               readonly="true"/>
                                            </div>
                                        </div>
                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['export.order.by.reason']}"
                                                               for="cbxReasonExport"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid">
                                                <p:selectOneMenu id="cbxReasonExport"
                                                                 value="#{manageReturnStockController.inputStockTransDTO.reasonId}"
                                                                 required="true"
                                                                 requiredMessage="#{lang['stock.rescueInformation.require.stockTrans.reason']}">
                                                    <f:selectItem
                                                            itemLabel="#{lang['common.reason.placeholder']}"
                                                            noSelectionOption="true"/>
                                                    <f:selectItems value="#{manageReturnStockController.reasons}"
                                                                   var="item"
                                                                   itemValue="#{item.reasonId}"
                                                                   itemLabel="#{item.reasonName}"/>
                                                    <p:ajax event="change"
                                                            process="@this"
                                                            listener="#{manageReturnStockController.onChangeReason()}"/>
                                                </p:selectOneMenu>
                                                <p:message for="cbxReasonExport"/>
                                                <p:remoteCommand name="updateControls" process="@this"
                                                                 update="@form"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ContainerIndent ">

                                        <div class="Container33 Responsive">
                                            <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                                <p:outputLabel styleClass="lb-sentinel"
                                                               value="#{lang['create.note.note']}"/>
                                            </div>
                                            <div class="Container60 Responsive50 ui-fluid">
                                                <p:inputText
                                                        value="#{manageReturnStockController.inputStockTransDTO.note}"
                                                        placeholder="#{lang['stock.rescueInformation.input.stockTrans.note']}"/>
                                            </div>
                                        </div>

                                        <div class="Container33 Responsive"/>
                                        <div class="Container33 Responsive"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p:outputPanel>
                    <p:outputPanel id="pnLstStockModel" styleClass="Container100"
                                   rendered="#{manageReturnStockController.viewRquestDetail}">
                        <div class="ContainerIndent pnLstStockModel mg-top-0 bg-panel">
                            <cbs:inputListProduct idComponent="listProduct"
                                                  id="listProduct"
                                                  value="#{manageReturnStockController.lstProductTag}"
                                                  idMessage="msgValidate"
                                                  updateCheckSerial="@([id$=dlgDetailSerial]), @([id$=msgValidate])"
                                                  onCompleteCheckSerial="if(!args.validationFailed){PF('dlgDetailSerial').show()}"/>

                            <div class="Container100 TexAlCenter pd-top-10 mg-top-0 bg-panel">
                                <cbs:confirmDialog
                                        idComponent="submitOrder"
                                        id="createOrder"
                                        valueButton="#{lang['mn.stock.underlying.export.stock']}"
                                        headerConfirm="#{lang['mn.stock.confirm.export.stock.header']}"
                                        messageConfirm="#{lang['mn.stock.confirm.export.stock.header.msgConfirm']}"
                                        actionOK="#{manageReturnStockController.doCreateReturnStock()}"
                                        resetValueButton="true"
                                        process="@form"
                                        disableButton="#{manageReturnStockController.created}"
                                        updateArea="@([id$=frmStaffReturn])"
                                        updateOK="@form"
                                        focusCancel="false"
                                        actionValidate="#{manageReturnStockController.doValidate()}"
                                        oncompleteOK=""
                                        isButton="true"/>
                                <p:commandButton value="#{lang['list.order.import.print.BBBG']}"
                                                 disabled="#{!manageReturnStockController.created}"
                                                 ajax="false"
                                                 styleClass="mg-left-5">
                                    <p:fileDownload value="#{manageReturnStockController.exportHandOverReport()}"/>
                                </p:commandButton>
                                <p:commandButton value="#{lang['export.order.btn.print.field']}"
                                                 process="@this)"
                                                 update="@this"
                                                 ajax="false"
                                                 disabled="#{!manageReturnStockController.created}"
                                                 styleClass="mg-left-5">
                                    <p:fileDownload value="#{manageReturnStockController.printStockTransDetail()}"/>
                                </p:commandButton>
                                <p:commandButton value="#{lang['common.reset']}"
                                                 process="@this"
                                                 update="@form"
                                                 action="#{manageReturnStockController.init()}"
                                                 styleClass="mg-left-5">
                                </p:commandButton>
                            </div>
                        </div>
                    </p:outputPanel>
                </p:outputPanel>
                <p:outputPanel id="viewInfor" styleClass="ContainerIndent" rendered="#{manageReturnStockController.showSearch}">
                    <cbs:panel classForToggle="panelInforRequest" toggle="true" titleHeader="#{lang['mn.balance.stock.request.search']}"/>
                    <div class="Container panelInforRequest" style="margin-bottom: 10px;margin-top: 10px;">
                        <div class="ContainerIndent mg-top-0">
                            <div class="Container33 Responsive">
                                <div class="Container40 Responsive50 mg-left-15 pd-top-4">
                                    <p:outputLabel value="#{lang['stock.rescue.warranty.stock.rescue.request.code']}" styleClass="lb-sentinel"/>
                                </div>
                                <div class="Container60 Responsive50 pd-top-4">
                                    <p:outputLabel value="#{manageReturnStockController.stockRequestDTOViewDetail.requestCode}" />
                                </div>
                            </div>
                            <div class="Container33 Responsive">
                                <div class="Container40 Responsive50 pd-top-4">
                                    <p:outputLabel value="#{lang['mn.infrastructure.area']}"/>
                                </div>
                                <div class="Container60 Responsive50 ui-fluid pd-top-4">
                                    <p:outputLabel value="#{manageReturnStockController.stockRequestDTOViewDetail.ownerCode}-#{manageReturnStockController.stockRequestDTOViewDetail.ownerName}" />
                                </div>
                            </div>
                        </div>
                    </div>
                </p:outputPanel>
                <!--Start vung thong tin chi tiet hang hoa-->
                <p:outputPanel id="pnlInfoDetailStockModel" styleClass="ContainerIndent" rendered="#{manageReturnStockController.showSearch}">
                    <cbs:panel classForToggle="panelDetailStock" toggle="true"
                               titleHeader="#{lang['create.note.detail.stock']}"/>

                    <div class="Container100 panelDetailStock" style="margin-bottom: 10px;margin-top: 10px;">
                        <p:dataTable id="lstDetailStock"
                                     var="stockTransFull"
                                     resizableColumns="true"
                                     paginator="#{lang['common.paging.paginator']}"
                                     rows="5"
                                     rowsPerPageTemplate="#{lang['common.paging.rowsPerPageTemplate']}"
                                     paginatorAlwaysVisible="#{lang['common.paging.paginatorAlwaysVisible']}"
                                     paginatorPosition="#{lang['common.paging.paginatorPosition']}"
                                     paginatorTemplate="#{lang['common.paging.paginatorTemplate']}"
                                     currentPageReportTemplate="#{lang['common.paging.currentPageReportTemplate']}"
                                     emptyMessage="#{lang['common.empty.records']}"
                                     value="#{manageReturnStockController.lsStockTransFull}">
                            <p:column style="width: 20%" styleClass="col-left"
                                      sortBy="#{stockTransFull.productOfferTypeName}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['export.order.type.product.name']}"
                                                  title="#{lang['export.order.type.product.name']}"/>
                                </f:facet>
                                <p:outputLabel value="#{stockTransFull.productOfferTypeName}"
                                               title="#{stockTransFull.productOfferTypeName}"/>
                            </p:column>
                            <p:column style="width: 15%" styleClass="col-left"
                                      sortBy="#{stockTransFull.prodOfferName}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['export.order.name.product.type']}"
                                                  title="#{lang['export.order.name.product.type']}"/>
                                </f:facet>
                                <p:outputLabel value="#{stockTransFull.prodOfferName}"
                                               title="#{stockTransFull.prodOfferName}"/>
                            </p:column>
                            <p:column styleClass="col-left" sortBy="#{stockTransFull.stateName}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['common.status']}"
                                                  title="#{lang['common.status']}"/>
                                </f:facet>
                                <p:outputLabel value="#{stockTransFull.stateName}"
                                               title="#{stockTransFull.stateName}"/>
                            </p:column>
                            <p:column styleClass="col-left" sortBy="#{stockTransFull.unit}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['common.unit']}" title="#{lang['common.unit']}"/>
                                </f:facet>
                                <p:outputLabel value="#{stockTransFull.unit}" title="#{stockTransFull.unit}"/>
                            </p:column>
                            <p:column style="text-align: right" sortBy="#{stockTransFull.sourcePrice}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['export.order.price']}"
                                                  title="#{lang['export.order.price']}"/>
                                </f:facet>
                                <h:outputText escape="true" converter="currencyFormat"
                                              value="#{stockTransFull.sourcePrice}" title=""/>
                            </p:column>
                            <p:column styleClass="col-left" style=""
                                      sortBy="#{stockTransFull.accountingModelCode}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['export.order.code.TC']}"
                                                  title="#{lang['export.order.code.TC']}"/>
                                </f:facet>
                                <p:outputLabel value="#{stockTransFull.accountingModelCode}"
                                               title="#{stockTransFull.accountingModelCode}"/>
                            </p:column>
                            <p:column style="text-align: right" sortBy="#{stockTransFull.quantity}">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['common.number']}"
                                                  title="#{lang['common.number']}"/>
                                </f:facet>
                                <h:outputText escape="true" converter="currencyFormat"
                                              value="#{stockTransFull.quantity}"
                                              title="#{stockTransFull.quantity}"/>
                            </p:column>
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="#{lang['create.note.detail.serial']}" title="#{lang['create.note.detail.serial']}"/>
                                </f:facet>
                                <p:commandLink styleClass="fa icon-zoom-in Fs16 blue icon-link" resetValues="true" rendered="#{stockTransFull.checkSerial eq '1'}"
                                               update="@([id$=dlgSerialView])" process="@this"
                                               oncomplete="PF('dlgSerialView').show();"
                                               title="#{lang['create.note.detail.serial']}"
                                               actionListener="#{manageReturnStockController.doShowViewSerial(stockTransFull.stockTransDetailId)}"/>

                            </p:column>
                        </p:dataTable>
                    </div>
                </p:outputPanel>
                <p:outputPanel styleClass="ContainerIndent TexAlCenter mg-top-0" rendered="#{manageReturnStockController.showSearch}">
                    <p:commandButton value="#{lang['common.back.page']}"
                                     process="@this"
                                     update="@form"
                                     actionListener="#{manageReturnStockController.doBackPage}">
                    </p:commandButton>
                </p:outputPanel>
                <!--End vung thong tin chi tiet hang hoa-->
            </p:outputPanel>
        </h:form>
        <p:dialog appendTo="@(body)"
                  closable="true"
                  closeOnEscape="true"
                  maximizable="true"
                  position="center"
                  id="dlgDetailSerial"
                  widgetVar="dlgDetailSerial"
                  header="#{lang['create.note.detail.serial']}"
                  modal="true" resizable="false"
                  dynamic="true"
                  styleClass="sale"
                  width="900">
            <ui:include src="../../../../../resources/tags/dlgDetailSerial.xhtml">
                <ui:param name="controller" value="#{manageReturnStockController.lstProductTag}"/>
                <ui:param name="idComponent" value="listProduct"/>
            </ui:include>
        </p:dialog>
        <p:dialog appendTo="@(parent)"
                  closable="true"
                  closeOnEscape="true"
                  maximizable="true"
                  onShow="setFocusByClass('btnCloseView')"
                  position="center"
                  id="dlgSerialView"
                  widgetVar="dlgSerialView"
                  header="#{lang['stock.trans.search.serial.stock']}"
                  modal="true" resizable="false"
                  dynamic="true"
                  styleClass="sale"
                  width="900">
            <p:outputPanel styleClass="ContainerIndent" id="pnViewListSerial">
                <cbs:panel classForToggle="lstOrderExport" titleHeader="#{lang['mn.stock.ToSerial']}" toggle="false"/>

                <div class="Container100 lstDataExport">
                    <p:dataTable
                            value="#{manageReturnStockController.lsSerial}"
                            var="serialDetail"
                            resizableColumns="true"
                            paginator="false"
                            rowIndexVar="index"
                            scrollable="true"
                            scrollHeight="150"
                            emptyMessage="#{lang['common.empty.records']}">
                        <p:column styleClass="col-left" sortBy="#{lang['mn.stock.fromSerial']}">
                            <f:facet name="header">
                                <h:outputText value="#{lang['mn.stock.fromSerial']}" title="#{lang['mn.stock.fromSerial']}"/>
                            </f:facet>
                            <h:outputText escape="true" value="#{serialDetail.fromSerial}"
                                          title="#{serialDetail.fromSerial}"/>
                        </p:column>
                        <p:column styleClass="col-left" sortBy="#{lang['mn.stock.ToSerial']}">
                            <f:facet name="header">
                                <h:outputText value="#{lang['mn.stock.ToSerial']}" title="#{lang['mn.stock.ToSerial']}"/>
                            </f:facet>
                            <h:outputText escape="true" value="#{serialDetail.toSerial}"
                                          title="#{serialDetail.toSerial}"/>
                        </p:column>
                        <p:column styleClass="col-left" sortBy="#{serialDetail.quantity}">
                            <f:facet name="header">
                                <h:outputText value="#{lang['common.number']}" title="#{lang['common.number']}"/>
                            </f:facet>
                            <h:outputText escape="true" value="#{serialDetail.quantity}" title="#{serialDetail.quantity}" converter="currencyFormat"/>
                        </p:column>
                    </p:dataTable>
                </div>
            </p:outputPanel>

            <div class="ContainerIndent TexAlCenter">
                <p:commandButton value="#{lang['notification.close']}" immediate="true" styleClass="btnCloseView"
                                 oncomplete="PF('dlgSerialView').hide()"/>
            </div>
        </p:dialog>
    </ui:define>
</ui:composition>
