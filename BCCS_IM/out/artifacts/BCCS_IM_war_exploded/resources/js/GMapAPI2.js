var loadGMapAPI = function(){
"undefined"==typeof urlServer&&(urlServer="http://210.211.99.50:8080/");var OpenLayersEX_ImgLoc=urlServer+"map/ol/img_ext/";var EARTH_RADIUS=6378137;"undefined"==typeof viettel&&(viettel={});viettel.MVCObject=function(){var a=new google.maps.MVCObject;this.setGMVCObj=function(b){a=b};this.getGMVCObj=function(){return a};this.getOriginalObj=function(){return a};this.bindTo=function(b,c,d,e){a.bindTo(b,c,d,e)};this.get=function(b){return a.get(b)};this.notify=function(b){a.notify(b)};this.set=function(b,c){a.set(b,c)};this.setValues=function(b){a.setValues(b)};this.unbind=function(){a.unbind()};this.unbindAll=function(){a.unbindAll()}};viettel.LatLng=function(a,b){var c=new google.maps.LatLng(a,b);this.equals=function(a){a=a.getGLatLng();return c.equals(a)};this.toString=function(){return c.toString()};this.toUrlValue=function(a){return c.toUrlValue(a)};this.lat=function(){return c.lat()};this.lng=function(){return c.lng()};this.clone=function(){return new viettel.LatLng(this.lat(),this.lng())};this.getOriginalObj=function(){return c};this.getGLatLng=function(){return c};this.setGlatLng=function(a){c=a}};viettel.LatLngBounds=function(a,b){var c;c=VTObjChecker.isLatLngObj(a)&&VTObjChecker.isLatLngObj(b)?new google.maps.LatLngBounds(a.getGLatLng(),b.getGLatLng()):new google.maps.LatLngBounds;this.contains=function(a){return c.contains(a.getGLatLng())};this.equals=function(a){return c.equals(a.getGLatLngBound())};this.extend=function(a){var a=c.extend(a.getGLatLng()),b=new viettel.LatLngBounds;b.setGLatLngBound(a);return b};this.getCenter=function(){return new viettel.LatLng(c.getCenter().lat(),c.getCenter().lng())};
this.getNorthEast=function(){return new viettel.LatLng(c.getNorthEast().lat(),c.getNorthEast().lng())};this.getSouthWest=function(){return new viettel.LatLng(c.getSouthWest().lat(),c.getSouthWest().lng())};this.intersects=function(a){return c.intersects(a.getGLatLngBound())};this.union=function(a){var a=c.union(a.getGLatLngBound()),b=new viettel.LatLngBounds;b.setGLatLngBound(a);return b};this.isEmpty=function(){if(null==c||c.isEmpty())return!0;var a=c.getSouthWest(),b=c.getNorthEast();return a.lat()==
b.lat()&&a.lng()==b.lng()?!0:!1};this.toString=function(){return c.toString()};this.toUrlValue=function(a){return c.toUrlValue(a)};this.getOriginalObj=function(){return c};this.getGLatLngBound=function(){return c};this.setGLatLngBound=function(a){c=a}};viettel.Point=function(a,b){var c=new google.maps.Point(a,b);this.x=a;this.y=b;this.equals=function(a){return c.equals(a.getGPoint())};this.toString=function(){return c.toString()};this.getGPoint=function(){return c};this.getOriginalObj=function(){return c}};viettel.Size=function(a,b){var c=new google.maps.Size(a,b);this.width=a;this.height=b;this.equals=function(a){return c.equals(a)};this.toString=function(){return c.toString()};this.vtType=function(){return VT_SIZE};this.getGSize=function(){return c};this.getOriginalObj=function(){return c}};VTObjChecker={isObject:function(a){return a instanceof Object},isNumber:function(a){return"number"==typeof a},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isMapObj:function(a){return a instanceof viettel.Map},isMapOptionObj:function(a){return a instanceof viettel.MapOptions},isMarkerObj:function(a){return a instanceof viettel.Marker},isMarkerOption:function(a){return a instanceof viettel.MarkerOptions},isMarkerImage:function(a){return a instanceof
viettel.MarkerImage},isLatLngObj:function(a){return a instanceof viettel.LatLng},isLatLngBoundObj:function(a){return a instanceof viettel.LatLngBounds},isSizeObj:function(a){return a instanceof viettel.Size},isPolylineObj:function(a){return a instanceof viettel.Polyline},isPolylineOption:function(a){return a instanceof viettel.PolylineOptions},isPolygonObj:function(a){return a instanceof viettel.Polygon},isCircleObj:function(a){return a instanceof viettel.Circle},isPolygonOption:function(a){return a instanceof
viettel.PolygonOptions},isMVCArray:function(a){return a instanceof viettel.MVCArray},isArray:function(a){return a instanceof Array},isMapTypeObj:function(a){return VTObjChecker.isMapObj(a)||VTObjChecker.isCircleObj(a)||VTObjChecker.isMarkerObj(a)||VTObjChecker.isPolylineObj(a)||VTObjChecker.isPolygonObj(a)}};viettel.GeometryUtil={getLength:function(a){for(var b=0,c=0;c<a.length-1;c++)b+=this.getDistanceBetween(a[c],a[c+1]);return b},getDistanceBetween:function(a,b,c){var d=EARTH_RADIUS/1E3;VTObjChecker.isObject(c)&&(d=c);"undefined"===typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180});var c=(b.lat()-a.lat()).toRad(),e=(b.lng()-a.lng()).toRad(),a=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.lat().toRad())*Math.cos(b.lat().toRad())*Math.sin(e/2)*Math.sin(e/2),a=2*Math.atan2(Math.sqrt(a),
Math.sqrt(1-a));return Math.round(Number(1E3*d*a))},checkPointInPolygon:function(a,b){var c=b.length;if(0>=c)return!1;var d,e=c-1,f=!1;for(d=0;d<c;d++){if(b[d].lat()<a.lat()&&b[e].lat()>=a.lat()||b[e].lat()<a.lat()&&b[d].lat()>=a.lat())b[d].lng()+(a.lat()-b[d].lat())/(b[e].lat()-b[d].lat())*(b[e].lng()-b[d].lng())<a.lng()&&(f=!f);e=d}return f},computeOffset:function(a,b,c,d){var e=EARTH_RADIUS/1E3;VTObjChecker.isObject(d)&&(e=d);"undefined"===typeof Number.prototype.toRad&&(Number.prototype.toRad=
function(){return this*Math.PI/180});var d=b/1E3/e,b=Math.sin(d),d=Math.cos(d),f=this.degreesToRadians(a.lat()),a=this.degreesToRadians(a.lng()),e=Math.cos(f),g=Math.sin(f),f=Math.asin(g*d+e*b*Math.cos(c.toRad())),c=a+Math.atan2(Math.sin(c.toRad())*b*e,d-g*Math.sin(f));return new viettel.LatLng(this.radiansToDegrees(f),this.radiansToDegrees(c))},degreesToRadians:function(a){return a*(Math.PI/180)},radiansToDegrees:function(a){return a*(180/Math.PI)},computeArea:function(a){var b=0,c=VTObjChecker.isObject(a)?
a.length:0;if(2<c){for(var d,e,f=0;f<c;f++)d=a[f],e=f+1<c?a[f+1]:a[0],b+=viettel.GeometryUtil.degreesToRadians(e.lng()-d.lng())*(2+Math.sin(viettel.GeometryUtil.degreesToRadians(d.lat()))+Math.sin(viettel.GeometryUtil.degreesToRadians(e.lat())));b=b*EARTH_RADIUS*EARTH_RADIUS/2}return Math.abs(b)},_distance2:function(a,b){var c=b.lng()-a.lng(),d=b.lat()-a.lat();return c*c+d*d},_projectPointOnSegment:function(a,b,c){var d={distance:0,pt:null,flag:-1},e=c.lng()-b.lng(),f=c.lat()-b.lat();if(0==e&&0==
f)return d.pt=new viettel.LatLng(b.lat(),b.lng()),d.flag=0,d.distance=viettel.GeometryUtil._distance2(a,d.pt),d;var g=-e,k=f*b.lng()-e*b.lat(),h=e*a.lng()+f*a.lat(),i=f*f-e*g,g=(k*f-h*g)/i,e=(f*h-e*k)/i;d.pt=new viettel.LatLng(e,g);d.flag=0;d.distance=viettel.GeometryUtil._distance2(a,d.pt);a=(b.lng()-g)*(c.lng()-g)+(b.lat()-e)*(c.lat()-e);0<a&&(a=(g-b.lng())*(c.lng()-b.lng())+(e-b.lat())*(c.lat()-b.lat()),d.flag=0>a?-1:1);return d},projectPointOnSegment:function(a,b,c){b=viettel.GeometryUtil._projectPointOnSegment(a,
b,c);b.distance=null!=b.pt?viettel.GeometryUtil.getDistanceBetween(a,b.pt):0;return b},distancePointToPoly:function(a,b){var c={distance:0,pt:null,index:-1},d=VTObjChecker.isObject(b)?b.length:0;if(2>d)return c;for(var e=b[0].lng(),f=b[0].lat(),g=-1,k=1E12,h=0;h<d-1;h++){var i=viettel.GeometryUtil._projectPointOnSegment(a,b[h],b[h+1]);if(0!=i.flag){var j=viettel.GeometryUtil._distance2(a,b[h]),m=viettel.GeometryUtil._distance2(a,b[h+1]);j<m?(i.distance=j,i.pt=b[h]):(i.distance=m,i.pt=b[h+1])}i.distance<
k&&(e=i.pt.lng(),f=i.pt.lat(),k=i.distance,g=h)}c.index=g;c.pt=new viettel.LatLng(f,e);c.distance=viettel.GeometryUtil.getDistanceBetween(a,c.pt);return c}};viettel.MapConfig=function(){this.mapPosition={}};viettel.Map=function(a,b){var c=new viettel.MapOptions,d=new google.maps.Map(a);this.controls=d.controls;this.loadedMap=!1;this.fitBounds=function(a){d.fitBounds(a.getGLatLngBound())};this.getBounds=function(){var a=d.getBounds(),b=new viettel.LatLngBounds;b.setGLatLngBound(a);return b};this.getCenter=function(){return new viettel.LatLng(d.getCenter().lat(),d.getCenter().lng())};this.setCenter=function(a){var b=a.getGLatLng();d.setCenter(b);c.center=a};this.getDiv=function(){return d.getDiv()};this.getZoom=
function(){return d.getZoom()};this.setZoom=function(a){d.setZoom(a);c.zoom=a};this.setOptions=function(a){d.setOptions(c.getGMapOptions(a));if(VTObjChecker.isBoolean(a.searchControl))if(a.searchControl){if(null==k){var b=document.createElement("DIV");k=new SearchControl(b,f);k.div=b;b=f.controls[viettel.ControlPosition.BOTTOM_CENTER].push(b);k.index=b;k.setVisible(a.searchControl)}}else null!=k&&(f.controls[viettel.ControlPosition.BOTTOM_CENTER].removeAt(k.index-1,1),k=null)};var e=new viettel.Projection,
f=this;(function(){var a=new ExOverlayView(d);viettel.Events.addListenerOnce(a,"onload",function(){e.setGProjection(a.getProjection());viettel.Events.trigger(f,"projection_loaded")})})();this.getProjection=function(){return e};this.fromDivPixelToLatLng=function(a){return e.fromDivPixelToLatLng(a)};this.fromLatLngToDivPixel=function(a){return e.fromLatLngToDivPixel(a)};this.fromContainerPixelToLatLng=function(a){return e.fromContainerPixelToLatLng(a)};this.fromLatLngToContainerPixel=function(a){return e.fromLatLngToContainerPixel(a)};
this.getGMapObj=function(){return d};this.getOriginalObj=function(){return d};this.panTo=function(a){a=new google.maps.LatLng(a.lat(),a.lng());return d.panTo(a)};this.getType=function(){return"map"};var g=new viettel.MapConfig;this.getMapConfig=function(){return g};var f=this,k,h=function(){viettel.Events.addListenerOnce(d,"idle",function(){f.loadedMap=!0})};(function(){VTObjChecker.isObject(b)||(b={});null==b.searchControl&&(b.searchControl=!1);VTObjChecker.isNumber(b.zoom)||(b.zoom=16);VTObjChecker.isLatLngObj(b.center)||
(b.center=new viettel.LatLng(21.0279143,105.844878));f.setOptions(b);h();var a=jQuery(f.getDiv()).offset();g.mapPosition=a})()};viettel.MapOptions=function(){var a;this.center;this.zoom;this.panControl;this.panZoomControlOptions;this.scaleControl;this.scaleControlOptions;this.rotateControl;this.rotateControlOptions;this.disableDefaultUI;this.overviewControl;this.disableDoubleClickZoom;this.getGMapOptions=function(b){a={};null!=b.center&&(a.center=b.center.getGLatLng(),this.center=b.center);null!=b.zoom&&(this.zoom=a.zoom=b.zoom);null!=b.panZoomControl&&(a.zoomControl=b.panZoomControl,a.panControl=b.panZoomControl);null!=b.panZoomControlOptions&&
(a.panControlOptions=b.panZoomControlOptions,a.zoomControlOptions=b.panZoomControlOptions);null!=b.scaleControl&&(a.scaleControl=b.scaleControl);VTObjChecker.isObject(b.scaleControlOptions)&&(a.scaleControlOptions=b.scaleControlOptions);null!=b.rotateControl&&(a.rotateControl=b.rotateControl);VTObjChecker.isObject(b.rotateControlOptions)&&(a.rotateControlOptions=b.rotateControlOptions);VTObjChecker.isBoolean(b.overviewControl)&&(a.overviewMapControl=b.overviewControl);null!=b.disableDefaultUI&&(a.disableDefaultUI=
b.disableDefaultUI);null!=b.disableDoubleClickZoom&&(a.disableDoubleClickZoom=b.disableDoubleClickZoom);a.mapTypeId=google.maps.MapTypeId.ROADMAP;return a}};function SearchControl(a,b){function c(){if(e){var a=document.getElementById("locationValue").value;""!=a&&(new viettel.GeoService).getLocations(a,function(a,c){c==viettel.GeoServiceStatus.OK&&(b.setCenter(a.items[0].location),null==f&&(f=new viettel.Marker,f.setMap(b)),f.setPosition(a.items[0].location))})}}function d(){document.getElementById("locationValue").value="";e=!0;document.getElementById("locationValueDiv").style.width="200px";document.getElementById("searchDiv").style.left="210px";viettel.Events.addListenerOnce(b,
"click",function(){e=!1;document.getElementById("locationValue").value=viettel.Language.SearchControl.defaultText;document.getElementById("locationValue").style.color="rgb(180, 180, 180)";document.getElementById("locationValueDiv").style.width="130px";document.getElementById("searchDiv").style.left="140px";window.removeEventListener("keypress",h,!1)});document.getElementById("locationValue").style.color="rgb(0, 0, 0)";window.addEventListener("keypress",h,!1)}var e=!1;a.style.padding="5px";var f,g=
document.createElement("div");g.id="searchControl";g.innerHTML="<div style='width:130px; position: absolute; bottom:0px' id='locationValueDiv'><input type='textbox' style='width:100%;color:rgb(180, 180, 180)' id='locationValue'  value='' onclick='onfocusTextbox()'/></div><div style='left:140px; position: absolute; bottom:0px' id='searchDiv'><input type='button' value='' id='searchButton'' /></div>";g.style.position="absolute";a.appendChild(g);this.setVisible=function(a){g.style.display=a?"block":
"none"};var k=setInterval(function(){null!=document.getElementById("locationValue")&&null!=document.getElementById("searchButton")&&(document.getElementById("locationValue").value=viettel.Language.SearchControl.defaultText,document.getElementById("searchButton").value=viettel.Language.SearchControl.searchButtonValue,document.getElementById("locationValue").onclick=d,document.getElementById("searchButton").onclick=c,clearInterval(k))},100),h=function(a){13==a.keyCode&&c()}};viettel.OverlayView=function(){var a=new google.maps.OverlayView,b,c=new viettel.MapPanes,d;a.draw=function(){d.draw()};a.onAdd=function(){d.onAdd()};a.onRemove=function(){d.onRemove()};this.draw=function(){};this.getMap=function(){};this.getPanes=function(){b=a.getPanes();c.setGPanes(b);return c};this.getProjection=function(){return a};this.onAdd=function(){};this.onRemove=function(){};this.setMap=function(b){null!=b?(d=this,a.setMap(b.getGMapObj())):a.setMap(null)};var e=new viettel.Projection;
this.getProjection=function(){e.setGProjection(a.getProjection());return e}};viettel.MapPanes=function(){var a;this.setGPanes=function(b){a=b};this.getGPanes=function(){return a};this.appendDOM=function(b){a.overlayImage.appendChild(b)};this.appendEvent=function(b){a.overlayMouseTarget.appendChild(b)}};
viettel.Projection=function(){var a;this.getGProjection=function(){return a};this.setGProjection=function(b){a=b};this.fromDivPixelToLatLng=function(b){return new viettel.LatLng(a.fromDivPixelToLatLng(b).lat(),a.fromDivPixelToLatLng(b).lng())};this.fromLatLngToDivPixel=function(b){return a.fromLatLngToDivPixel(b.getGLatLng())};this.fromContainerPixelToLatLng=function(b){return new viettel.LatLng(a.fromContainerPixelToLatLng(b).lat(),a.fromContainerPixelToLatLng(b).lng())};this.fromLatLngToContainerPixel=
function(b){return a.fromLatLngToContainerPixel(b.getGLatLng())}};ExOverlayView.prototype=new google.maps.OverlayView;function ExOverlayView(a){this.setMap(a)}ExOverlayView.prototype.onAdd=function(){};ExOverlayView.prototype.draw=function(){viettel.Events.trigger(this,"onload",this.getProjection())};viettel.InfoWindow=function(a){var b=new viettel.InfoWindowOptions,c=new google.maps.InfoWindow(b.getGInfoWindowOptions(a));this.close=function(){c.close()};this.getContent=function(){return c.getContent()};this.getPosition=function(){return new LatLng(c.getPosition.lat(),c.getPosition.lng())};this.open=function(a,b){var f=null;VTObjChecker.isMapTypeObj(b)&&(f=b.getGMapObj(b));c.open(a.getGMapObj(),f)};this.setContent=function(a){c.setContent(a)};this.setOptions=function(a){c.setOptions(b.getGInfoWindowOptions(a))};
this.setPosition=function(a){a=a.getGLatLng();c.setPosition(a)};this.setZIndex=function(a){c.setZIndex(a)}};viettel.InfoWindowOptions=function(){this.maxWidth;this.content;this.position;this.zIndex;var a;this.getGInfoWindowOptions=function(b){a={};null!=b.maxWidth&&(a.maxWidth=b.maxWidth);null!=b.content&&(a.content=b.content);null!=b.position&&(a.position=b.position.getGLatLng());a.zIndex=a.zIndex;return a}};viettel.Marker=function(a){viettel.MVCObject.call(this);VTObjChecker.isObject(a)||(a={});var b=new viettel.MarkerOptions,c;c=new google.maps.Marker(b.getGMarkerOption(a));this.setGMVCObj(c);this.getMap=function(){return b.map};this.setMap=function(a){null!=a?(c.setMap(a.getGMapObj()),b.map=a):c.setMap(null)};this.getPosition=function(){return new viettel.LatLng(c.getPosition().lat(),c.getPosition().lng())};this.setPosition=function(a){var e=a.getGLatLng();c.setPosition(e);b.position=a};this.getTitle=
function(){return b.title};this.setTitle=function(a){c.setTitle(a);b.title=a};this.getVisible=function(){return c.getVisible()};this.setVisible=function(a){c.setVisible(a);b.visible=a};this.getIcon=function(){return b.icon};this.setIcon=function(a){if(VTObjChecker.isString(a))c.setIcon(a);else{var e=new viettel.MarkerImage;c.setIcon(e.getGMarkerImage(a))}b.icon=a};this.getZIndex=function(){return c.getZIndex()};this.setZIndex=function(a){c.setZIndex(a);b.zIndex=a};this.setDraggable=function(a){b.draggable=
a;c.setDraggable(a)};this.getDraggable=function(){return null!=b.draggable?b.draggable:!1};this.getGMapObj=function(){return c};this.getOriginalObj=function(){return c};this.getCursor=function(){return c.getCursor()};this.getClickable=function(){return c.getClickable()};this.setOptions=function(a){a=b.getGMarkerOption(a);c.setOptions(a)};this.getType=function(){return"marker"}};viettel.Marker.prototype=new viettel.MVCObject;viettel.Marker.prototype.constructor=viettel.Marker;
viettel.MarkerOptions=function(){this.icon;this.map;this.position;this.title;this.visible;this.zIndex;this.draggable;var a;this.getGMarkerOption=function(b){a={};if(null!=b.icon)if(VTObjChecker.isString(b.icon))this.icon=a.icon=b.icon;else if(VTObjChecker.isObject(b.icon)){var c=(new viettel.MarkerImage(b.icon)).getGMarkerImage(b.icon);this.icon=a.icon=c}VTObjChecker.isMapObj(b.map)?(a.map=b.map.getGMapObj(),this.map=b.map):"undefined"!=typeof b.map&&null==b.map&&(this.map=a.map=null);VTObjChecker.isLatLngObj(b.position)&&
(a.position=b.position.getGLatLng(),this.position=b.position);VTObjChecker.isString(b.title)&&(this.title=a.title=b.title);null!=b.visible&&(this.visible=a.visible=b.visible);null!=b.zIndex&&(this.zIndex=a.zIndex=b.zIndex);null!=b.draggable&&(this.draggable=a.draggable=b.draggable);return a}};
viettel.MarkerImage=function(a,b,c,d,e){this.origin=c;this.icon;this.scaledSize=e;this.size=b;this.url=a;this.anchor=d;this.getGMarkerImage=function(a){if(!VTObjChecker.isObject(a))return!1;var b,c;null!=a.scaledSize&&(b=a.scaledSize.getGSize());null!=a.size&&(c=a.size.getGSize());return new google.maps.MarkerImage(a.url,c,a.origin,a.anchor,b)}};viettel.Polyline=function(a){var b,c=this;viettel.MVCObject.call(this);VTObjChecker.isObject(a)||(a={});var d=new viettel.PolylineOptions,e=new google.maps.Polyline(d.getGPolylineOptions(a));"undefined"==typeof d.path&&(d.path=new viettel.MVCArray,d.path.setOriginalObj(e.getPath()));var f;this.setGMVCObj(e);this.getMap=function(){return d.map};this.setMap=function(a){null!=a?(f=a,e.setMap(f.getGMapObj()),d.map=a):(i&&c.setDrawing(!1),k&&c.setEditable(!1),e.setMap(null))};this.getPath=function(){return d.path};
this.setPath=function(a){VTObjChecker.isObject(a)&&(a instanceof Array?(d.path=new viettel.MVCArray,d.path.setGMVCArray(a),e.setPath(d.path.getGMVCArray())):a instanceof viettel.MVCArray&&(d.path=a,e.setPath(a.getGMVCArray())))};this.setOptions=function(a){e.setOptions(d.getGPolylineOptions(a))};this.getGMapObj=function(){return e};this.getLength=function(){return viettel.GeometryUtil.getLength(this.getPath().getArray())};var g,k;this.setEditable=function(a){(k=a)?(k=!0,null==g&&(g=new DrawingPolyline(this),
g.disableDrawLine(),g.init())):(k=!1,null!=g&&(g.disableEditable(),g=null))};this.getEditable=function(){return k};var h,i=!1;this.setDrawing=function(a){a?(i=!0,null==h&&(h=new DrawingPolyline(this),h.init())):(i=!1,null!=h&&(h.onCompleDraw(),h=null))};this.getDrawing=function(){return i};this.setDrawingState=function(){i=!1};this.setClickable=function(a){b=a;e.setOptions({clickable:a})};this.getClickable=function(){return b}};viettel.Polyline.prototype=new viettel.MVCObject;
viettel.Polyline.prototype.constructor=viettel.Polyline;
viettel.PolylineOptions=function(){this.map;this.path;this.strokeColor;this.strokeOpacity;this.strokeWeight;this.zIndex;this.clickable;var a;this.getGPolylineOptions=function(b){a={};VTObjChecker.isMapObj(b.map)?(a.map=b.map.getGMapObj(),this.map=b.map):"undefined"!=typeof b.map&&null==b.map&&(this.map=a.map=null);if(null!=b.path)if(b.path instanceof Array&&0<b.path.length){var c=new viettel.MVCArray;c.setGMVCArray(b.path);a.path=c.getGMVCArray();this.path=c}else b.path instanceof viettel.MVCArray&&
0<b.path.getLength()&&(a.path=b.path.getGMVCArray(),this.path=b.path);null!=b.strokeColor&&(this.strokeColor=a.strokeColor=b.strokeColor);null!=b.strokeWeight&&(this.strokeWeight=a.strokeWeight=b.strokeWeight);null!=b.strokeOpacity&&(this.strokeOpacity=a.strokeOpacity=b.strokeOpacity);null!=b.zIndex&&(this.zIndex=a.zIndex=b.zIndex);null!=b.clickable&&(this.clickable=a.clickable=b.clickable);return a}};viettel.Polygon=function(a){var b;viettel.MVCObject.call(this);VTObjChecker.isObject(a)||(a={});var c=new viettel.PolygonOptions;c.path=[];c.paths=[];var d=new google.maps.Polygon(c.getGPolygonOptions(a)),e;this.setGMVCObj(d);this.getMap=function(){return c.map};this.setMap=function(a){null!=a?(e=a,d.setMap(e.getGMapObj()),c.map=a):d.setMap(null)};this.getPath=function(){return c.path};this.getPaths=function(){return c.paths};this.setPath=function(a){VTObjChecker.isObject(a)&&(a instanceof Array?
(c.path=new viettel.MVCArray,c.path.setGMVCArray(a),d.setPath(c.path.getGMVCArray())):a instanceof viettel.MVCArray&&(c.path=a,d.setPath(a.getGMVCArray())))};this.setPaths=function(a){if(VTObjChecker.isObject(a)&&a instanceof Array){c.paths=[];for(var b=[],e=0;e<a.length;e++){var h=new viettel.MVCArray;h.setGMVCArray(a[e]);b.push(h.getGMVCArray());c.paths.push(h)}d.setPaths(b)}};this.setOptions=function(a){d.setOptions(c.getGPolygonOptions(a))};this.getGMapObj=function(){return d};this.setEditable=
function(a){d.setEditable(a)};this.containPoint=function(a){return viettel.GeometryUtil.checkPointInPolygon(a,this.getPath().getArray())};this.getPerimeter=function(){for(var a=[],b=d.getPaths(),c=0;c<b.getLength();c++){for(var e=b.getAt(c),i=0;i<e.getLength();i++){var j=e.getAt(i);a.push(j)}a.push(e.getAt(0))}return viettel.GeometryUtil.getLength(a)};this.getArea=function(){for(var a=[],b=d.getPaths(),c=0;c<b.getLength();c++)for(var e=b.getAt(c),i=0;i<e.getLength();i++){var j=e.getAt(i);a.push(j)}return google.maps.geometry.spherical.computeArea(a)};
this.setClickable=function(a){b=a;gPolyline.setOptions({clickable:a})};this.getClickable=function(){return b}};viettel.Polygon.prototype=new viettel.MVCObject;viettel.Polygon.prototype.constructor=viettel.Polygon;
viettel.PolygonOptions=function(){this.map;this.path;this.strokeColor;this.strokeOpacity;this.strokeWeight;this.zIndex;this.clickable;this.fillColor;this.fillOpacity;var a;this.getGPolygonOptions=function(b){a={};VTObjChecker.isMapObj(b.map)?(a.map=b.map.getGMapObj(),this.map=b.map):"undefined"!=typeof b.map&&null==b.map&&(this.map=a.map=null);if(null!=b.path)if(b.path instanceof Array){var c=new viettel.MVCArray;c.setGMVCArray(b.path);a.path=c.getGMVCArray();this.path=c}else b.path instanceof viettel.MVCArray&&
(a.path=b.path.getGMVCArray(),this.path=a.path);null!=b.strokeColor&&(this.strokeColor=a.strokeColor=b.strokeColor);null!=b.strokeWeight&&(this.strokeWeight=a.strokeWeight=b.strokeWeight);null!=b.zIndex&&(this.zIndex=a.zIndex=b.zIndex);null!=b.clickable&&(this.clickable=a.clickable=b.clickable);null!=b.fillColor&&(this.fillColor=a.fillColor=b.fillColor);null!=b.fillOpacity&&(this.fillOpacity=a.fillOpacity=b.fillOpacity);return a}};viettel.Circle=function(a){VTObjChecker.isObject(a)||(a={});var b=new viettel.CircleOptions,c=new google.maps.Circle(b.getCircleOptions(a)),d;this.getMap=function(){return b.map};this.setMap=function(a){VTObjChecker.isMapObj(a)?(d=a,c.setMap(d.getGMapObj()),b.map=a):"undefined"!=typeof a&&null==a&&c.setMap(null)};this.setEditable=function(a){c.setEditable(a)};this.setRadius=function(a){c.setRadius(a)};this.getEditable=function(){return c.getEditable()};this.getRadius=function(){return c.getRadius()};
this.getCenter=function(){return b.center};this.setCenter=function(a){VTObjChecker.isLatLngObj(a)&&c.setCenter(a.getGLatLng())};this.getBounds=function(){var a=c.getBounds();return null!=a?new viettel.LatLngBounds(a.getSouthWest(),a.getNorthEast):null};this.getGMapObj=function(){return c};this.getPerimeter=function(){return 2*Math.PI*c.getRadius()};this.getArea=function(){return Math.PI*c.getRadius()*c.getRadius()}};
viettel.CircleOptions=function(){this.center;this.fillColor;this.fillOpacity;this.map;this.radius;this.strokeColor;this.strokeOpacity;this.strokeWeight;this.zIndex;var a;this.getCircleOptions=function(b){a={};VTObjChecker.isMapObj(b.map)?(a.map=b.map.getGMapObj(),this.map=b.map.getGMapObj()):"undefined"!=typeof b.map&&null==b.map&&(this.map=a.map=null);null!=b.fillColor&&(a.fillColor=b.fillColor,this.fillColor=b.strokeColor);null!=b.fillOpacity&&(this.fillOpacity=a.fillOpacity=b.fillOpacity);null!=
b.strokeColor&&(this.strokeColor=a.strokeColor=b.strokeColor);null!=b.strokeOpacity&&(this.strokeOpacity=a.strokeOpacity=b.strokeOpacity);null!=b.zIndex&&(this.zIndex=a.zIndex=b.zIndex);null!=b.radius&&(this.radius=a.radius=b.radius);null!=b.center&&(a.center=b.center.getGLatLng(),this.center=b.center);return a}};viettel.MVCArray=function(){var a=new google.maps.MVCArray;a.originObj=this;this.getGMVCArray=function(){return a};this.setGMVCArray=function(b){for(var c=0;c<b.length;c++)a.push(b[c].getGLatLng())};this.setOriginalObj=function(b){a=b};this.clear=function(){a.clear()};this.getArray=function(){for(var a=[],c=0;c<this.getLength();c++)a.push(this.getAt(c).getGLatLng());return a};this.getAt=function(b){return b>a.getLength()-1?null:new viettel.LatLng(a.getAt(b).lat(),a.getAt(b).lng())};this.getLength=
function(){return a.getLength()};this.insertAt=function(b,c){a.insertAt(b,c.getGLatLng())};this.pop=function(){a.pop()};this.push=function(b){a.push(b.getGLatLng())};this.removeAt=function(b){a.removeAt(b)};this.setAt=function(b){a.setAt(b)}};viettel.Events=function(){return{addListener:function(a,b,c){var d=new viettel.MapsEventListener,b=VTObjChecker.isMapTypeObj(a)?google.maps.event.addListener(a.getGMapObj(),b,function(b){var d=new viettel.MouseEvent(a);d.setGMouseEvent(b);c.call(a,d)}):google.maps.event.addListener(a,b,c);d.setGEventListener(b);return d},addListenerOnce:function(a,b,c){VTObjChecker.isMapTypeObj(a)?google.maps.event.addListenerOnce(a.getGMapObj(),b,function(b){var e=new viettel.MouseEvent(a);e.setGMouseEvent(b);c.call(a,
e)}):google.maps.event.addListenerOnce(a,b,c)},addDomListener:function(a,b,c){var d=new viettel.MapsEventListener,a=google.maps.event.addDomListener(a,b,function(a){c(a)});d.setGEventListener(a);return d},addDomListenerOnce:function(a,b,c){var d=new viettel.MapsEventListener,a=google.maps.event.addDomListenerOnce(a,b,function(a){c(a)});d.setGEventListener(a);return d},clearListeners:function(a,b){VTObjChecker.isMapTypeObj(a)?google.maps.event.clearListeners(a.getGMapObj(),b):google.maps.event.clearListeners(a,
b)},removeListener:function(a){google.maps.event.removeListener(a.getGEventListener())},trigger:function(a,b,c){VTObjChecker.isMapTypeObj(a)?google.maps.event.trigger(a.getGMapObj(),b,c):google.maps.event.trigger(a,b,c)}}}();viettel.MouseEvent=function(a,b,c){var d;this.latLng;this.pixel;null!=c&&(this.pixel=c,this.latLng=b.fromContainerPixelToLatLng(this.pixel));this.getEvt=function(){return a};this.setGMouseEvent=function(a){null!=a&&(d=a,null!=d.latLng&&(this.latLng=new viettel.LatLng(d.latLng.lat(),d.latLng.lng())),null!=d.pixel&&(this.pixel=new viettel.Point(d.pixel.x,d.pixel.y)))}};viettel.MapsEventListener=function(a){var b=a;this.setGEventListener=function(a){b=a};this.getGEventListener=function(){return b}};viettel.ControlPosition={BOTTOM_CENTER:google.maps.ControlPosition.BOTTOM_CENTER,BOTTOM_LEFT:google.maps.ControlPosition.BOTTOM_LEFT,BOTTOM_RIGHT:google.maps.ControlPosition.BOTTOM_LEFT,LEFT_BOTTOM:google.maps.ControlPosition.LEFT_BOTTOM,LEFT_CENTER:google.maps.ControlPosition.LEFT_CENTER,LEFT_TOP:google.maps.ControlPosition.LEFT_TOP,RIGHT_BOTTOM:google.maps.ControlPosition.RIGHT_BOTTOM,RIGHT_CENTER:google.maps.ControlPosition.RIGHT_CENTER,RIGHT_TOP:google.maps.ControlPosition.RIGHT_TOP,TOP_CENTER:google.maps.ControlPosition.TOP_CENTER,
TOP_LEFT:google.maps.ControlPosition.TOP_LEFT,TOP_RIGHT:google.maps.ControlPosition.TOP_RIGHT};viettel.PanZoomControlOptions=function(a){this.position=a};viettel.ScaleControlOptions=function(a){this.position=a};viettel.RotateControlOptions=function(a){this.position=a};viettel.GeoObjType={ALL:0,ROAD:9,GAS_STATION:1,EDUCATION:2,SHOPPING:3,FOOD_DRINK:4,BANK:5,HOSPITAL:6,COMMITTEE:7,GOVERMENT:8};
viettel.GeoService=function(){var a=new google.maps.Geocoder;this.setOffset=function(){};this.setLimit=function(){};this.getAddress=function(b,c){var d=new google.maps.LatLng(b.lat(),b.lng());a.geocode({latLng:d},function(a,d){var i=viettel.GeoServiceStatus.UNKNOWN_ERROR;d==google.maps.GeocoderStatus.INVALID_REQUEST?i=viettel.GeoServiceStatus.INVALID_REQUEST:d==google.maps.GeocoderStatus.OK?i=viettel.GeoServiceStatus.OK:d==google.maps.GeocoderStatus.REQUEST_DENIED?i=viettel.GeoServiceStatus.REQUEST_DENIED:
d==google.maps.GeocoderStatus.UNKNOWN_ERROR?i=viettel.GeoServiceStatus.UNKNOWN_ERROR:d==google.maps.GeocoderStatus.ZERO_RESULTS&&(i=viettel.GeoServiceStatus.ZERO_RESULTS);var j=null;if(i==viettel.GeoServiceStatus.OK){var j=[],g;for(g in a){var l=new viettel.GeoServiceItem;l.location=b;l.name=a[g].formatted_address;l.address=a[g].formatted_address;l.type=viettel.GeoObjType.ALL;l.fulladdress="";l.website="";l.phone="";l.email="";j.push(l)}}c({items:j,total:null==j?0:j.length},i)})};this.getLocations=
function(a,f,g,k){VTObjChecker.isString(a)?b(a,f):VTObjChecker.isLatLngBoundObj(a)?c(a,f,g):VTObjChecker.isLatLngObj(a)&&d(a,f,g,k)};var b=function(b,c){a.geocode({address:b},function(a,b){var d=viettel.GeoServiceStatus.UNKNOWN_ERROR;b==google.maps.GeocoderStatus.INVALID_REQUEST?d=viettel.GeoServiceStatus.INVALID_REQUEST:b==google.maps.GeocoderStatus.OK?d=viettel.GeoServiceStatus.OK:b==google.maps.GeocoderStatus.REQUEST_DENIED?d=viettel.GeoServiceStatus.REQUEST_DENIED:b==google.maps.GeocoderStatus.UNKNOWN_ERROR?
d=viettel.GeoServiceStatus.UNKNOWN_ERROR:b==google.maps.GeocoderStatus.ZERO_RESULTS&&(d=viettel.GeoServiceStatus.ZERO_RESULTS);var e=[];if(d==google.maps.GeocoderStatus.OK)for(var e=[],j=0;j<a.length;j++){var m=new viettel.GeoServiceItem;m.location=new viettel.LatLng(a[j].geometry.location.lat(),a[j].geometry.location.lng());m.name=a[j].address_components[0].long_name;m.address=a[j].formatted_address;m.type=viettel.GeoObjType.ALL;m.fulladdress="";m.website="";m.phone="";m.email="";e.push(m)}c({items:e,
total:null==e?0:e.length},d)})},c=function(b,c,d){b=new google.maps.LatLngBounds(b.getSouthWest(),b.getNorthEast());a.geocode({bounds:b},function(a,b){var c=viettel.GeoServiceStatus.UNKNOWN_ERROR;b==google.maps.GeocoderStatus.INVALID_REQUEST?c=viettel.GeoServiceStatus.INVALID_REQUEST:b==google.maps.GeocoderStatus.OK?c=viettel.GeoServiceStatus.OK:b==google.maps.GeocoderStatus.REQUEST_DENIED?c=viettel.GeoServiceStatus.REQUEST_DENIED:b==google.maps.GeocoderStatus.UNKNOWN_ERROR?c=viettel.GeoServiceStatus.UNKNOWN_ERROR:
b==google.maps.GeocoderStatus.ZERO_RESULTS&&(c=viettel.GeoServiceStatus.ZERO_RESULTS);var e=null;if(c==google.maps.GeocoderStatus.OK)for(var e=[],f=0;f<a.length;f++){var l=new viettel.GeoServiceItem;l.location=new viettel.LatLng(a[f].geometry.location.lat(),a[f].geometry.location.lng());l.name=a[f].address_components[0].long_name;l.address=a[f].formatted_address;l.type=viettel.GeoObjType.ALL;l.fulladdress="";l.website="";l.phone="";l.email="";e.push(l)}d({items:e,total:null==e?0:e.length},c)})},d=
function(b,c,d,k){var h=new google.maps.LatLng(b.lat(),b.lng()),d=viettel.GeometryUtil.computeOffset(h,c*Math.sqrt(2),-135),h=viettel.GeometryUtil.computeOffset(h,c*Math.sqrt(2),45),d=new google.maps.LatLngBounds(d,h);a.geocode({bounds:d},function(a,d){var g=viettel.GeoServiceStatus.UNKNOWN_ERROR;d==google.maps.GeocoderStatus.INVALID_REQUEST?g=viettel.GeoServiceStatus.INVALID_REQUEST:d==google.maps.GeocoderStatus.OK?g=viettel.GeoServiceStatus.OK:d==google.maps.GeocoderStatus.REQUEST_DENIED?g=viettel.GeoServiceStatus.REQUEST_DENIED:
d==google.maps.GeocoderStatus.UNKNOWN_ERROR?g=viettel.GeoServiceStatus.UNKNOWN_ERROR:d==google.maps.GeocoderStatus.ZERO_RESULTS&&(g=viettel.GeoServiceStatus.ZERO_RESULTS);var h=null;if(g==google.maps.GeocoderStatus.OK){for(var h=[],o=0;o<a.length;o++){var p=new viettel.LatLng(a[o].geometry.location.lat(),a[o].geometry.location.lng());if(viettel.GeometryUtil.getDistanceBetween(b,p)<=c){new viettel.GeoServiceItem;var n=new viettel.GeoServiceItem;n.location=p;n.name=a[o].address_components[0].long_name;
n.address=a[o].formatted_address;n.type=viettel.GeoObjType.ALL;n.fulladdress="";n.website="";n.phone="";n.email="";h.push(n)}}0>=n.length&&(h=null,g=viettel.GeoServiceStatus.ZERO_RESULTS)}k({items:h,total:null==h?0:h.length},g)})}};viettel.GeoServiceStatus={};viettel.GeoServiceStatus.INVALID_REQUEST=google.maps.GeocoderStatus.INVALID_REQUEST;viettel.GeoServiceStatus.OK=google.maps.GeocoderStatus.OK;viettel.GeoServiceStatus.REQUEST_DENIED=google.maps.GeocoderStatus.REQUEST_DENIED;
viettel.GeoServiceStatus.UNKNOWN_ERROR=google.maps.GeocoderStatus.UNKNOWN_ERROR;viettel.GeoServiceStatus.ZERO_RESULTS=google.maps.GeocoderStatus.ZERO_RESULTS;viettel.GeoServiceStatus.ERROR=google.maps.GeocoderStatus.ERROR;viettel.GeoServiceItem=function(){this.location;this.name;this.address;this.type;this.fulladdress;this.website;this.phone;this.email;this.directions};viettel.RoutingTurn={GO_AHEAD:0,LEFT_LANE:1,RIGHT_LANE:2,TURN_LEFT:3,TURN_RIGHT:4,TWIST_LEFT:5,TWIST_RIGHT:6,TURN_BACK:7,TO_DESTINATION:8};
viettel.RoutingService=function(){this.route=function(a,b){var c=new google.maps.DirectionsService,d=null,e=null,f=a.provideRouteAlternatives,g=null;null!=a.destination&&("string"==typeof a.destination?d=a.destination:a.destination instanceof viettel.LatLng&&(d=new google.maps.LatLng(a.destination.lat(),a.destination.lng())));null!=a.origin&&("string"==typeof a.origin?e=a.origin:a.origin instanceof viettel.LatLng&&(e=new google.maps.LatLng(a.origin.lat(),a.origin.lng())));if(null!=a.waypoints)for(var g=
[],k=0;k<a.waypoints.length;k++){var h;"string"==typeof a.waypoints[k]?h=a.waypoints[k]:a.waypoints[k]instanceof viettel.LatLng&&(h=new google.maps.LatLng(a.waypoints[k].lat(),a.waypoints[k].lng()));g.push({location:h,stopover:!1})}c.route({origin:e,destination:d,travelMode:a.travelMode,provideRouteAlternatives:f,waypoints:g},function(a,c){var d=viettel.RoutingStatus.UNKNOWN_ERROR;c==google.maps.DirectionsStatus.INVALID_REQUEST?d=viettel.RoutingStatus.INVALID_REQUEST:c==google.maps.DirectionsStatus.MAX_WAYPOINTS_EXCEEDED?
d=viettel.RoutingStatus.MAX_WAYPOINTS_EXCEEDED:c==google.maps.DirectionsStatus.NOT_FOUND?d=viettel.RoutingStatus.NOT_FOUND:c==google.maps.DirectionsStatus.OK?d=viettel.RoutingStatus.OK:c==google.maps.DirectionsStatus.OVER_QUERY_LIMIT?d=viettel.RoutingStatus.OVER_QUERY_LIMIT:c==google.maps.DirectionsStatus.REQUEST_DENIED?d=viettel.RoutingStatus.REQUEST_DENIED:c==google.maps.DirectionsStatus.UNKNOWN_ERROR?d=viettel.RoutingStatus.UNKNOWN_ERROR:c==google.maps.DirectionsStatus.ZERO_RESULTS&&(d=viettel.RoutingStatus.ZERO_RESULTS);
var e=null;if(d==viettel.RoutingStatus.OK&&0<a.routes.length){var f=a.routes[0];if(null==f)e=null;else{var g=f.legs[0],e={length:g.distance.value,duration:g.duration.value,start_location:new viettel.LatLng(g.start_location.lat(),g.start_location.lng()),start_address:g.start_address,end_location:new viettel.LatLng(g.end_location.lat(),g.end_location.lng()),end_address:g.end_address},n=f.bounds.getNorthEast(),f=f.bounds.getSouthWest();e.bounds=new viettel.LatLngBounds(new viettel.LatLng(f.lat(),f.lng()),
new viettel.LatLng(n.lat(),n.lng()));e.directions=[];e.path=[];g=g.steps;for(n=0;n<g.length;n++){for(var f=g[n],h=0;h<f.path.length;h++)e.path.push(new viettel.LatLng(f.path[h].lat(),f.path[h].lng()));f={distance:f.distance.value,turn:viettel.RoutingTurn.GO_AHEAD,duration:f.duration.value,roundAbout:!1,start_location:new viettel.LatLng(f.start_location.lat(),f.start_location.lng()),end_location:new viettel.LatLng(f.end_location.lat(),f.end_location.lng()),index:0<e.path.length?e.path.length-1:0,instruction:f.instructions};
e.directions.push(f)}}}b(e,d)})}};viettel.RoutingRequest=function(){this.destination;this.origin;this.travelMode;this.provideRouteAlternatives;this.waypoints};viettel.RoutingStatus={};viettel.RoutingStatus.INVALID_REQUEST=google.maps.DirectionsStatus.INVALID_REQUEST;viettel.RoutingStatus.MAX_WAYPOINTS_EXCEEDED=google.maps.DirectionsStatus.MAX_WAYPOINTS_EXCEEDED;viettel.RoutingStatus.NOT_FOUND=google.maps.DirectionsStatus.NOT_FOUND;viettel.RoutingStatus.OK=google.maps.DirectionsStatus.OK;
viettel.RoutingStatus.OVER_QUERY_LIMIT=google.maps.DirectionsStatus.OVER_QUERY_LIMIT;viettel.RoutingStatus.REQUEST_DENIED=google.maps.DirectionsStatus.REQUEST_DENIED;viettel.RoutingStatus.UNKNOWN_ERROR=google.maps.DirectionsStatus.UNKNOWN_ERROR;viettel.RoutingStatus.ZERO_RESULTS=google.maps.DirectionsStatus.ZERO_RESULTS;viettel.RoutingStatus.ERROR=google.maps.DirectionsStatus.ERROR;
viettel.RoutingResult=function(){this.bounds;this.directions;this.path;this.length;this.duration;this.start_location;this.start_address;this.end_location;this.end_address};viettel.TravelMode={};viettel.TravelMode.MOTOR=google.maps.TravelMode.BICYCLING;viettel.TravelMode.CAR=google.maps.TravelMode.DRIVING;viettel.TravelMode.WALKING=google.maps.TravelMode.WALKING;viettel.TravelMode.LORRY=1E4;
viettel.RoutingItem=function(){this.distance;this.turn;this.duration;this.roundAbout;this.start_location;this.end_location;this.index};function MarkerLabel_(a,b){viettel.OverlayView.call(this);this.marker_=a;this.handCursorURL_=a.handCursorURL;this.labelDiv_=document.createElement("div");this.labelDiv_.style.cssText="position: absolute; overflow: hidden;";this.eventDiv_=document.createElement("div");this.eventDiv_.style.cssText=this.labelDiv_.style.cssText;this.eventDiv_.setAttribute("unselectable","on");this.eventDiv_.setAttribute("onselectstart","return false;");this.eventDiv_.setAttribute("ondragstart","return false;");this.crossDiv_=
MarkerLabel_.getSharedCross(b);this.draw=function(){this.setContent();this.setTitle();this.setStyles()};this.onAdd=function(){var a=this,b=!1,e=!1,f,g,k,h,i,j,m,l="url("+this.handCursorURL_+")",o=function(a){a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()},p=function(){a.marker_.setAnimation(null)};this.getPanes().appendDOM(this.labelDiv_);this.getPanes().appendEvent(this.eventDiv_);"undefined"===typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().appendDOM(this.crossDiv_),
MarkerLabel_.getSharedCross.processed=!0);this.listeners_=[viettel.Events.addDomListener(this.eventDiv_,"mouseover",function(b){b=new viettel.MouseEvent(b,a.marker_.getMap(),{x:b.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,y:b.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_);if(a.marker_.getDraggable()||a.marker_.getClickable())a.labelDiv_.style.cursor="pointer",a.eventDiv_.style.cursor="pointer",viettel.Events.trigger(a.marker_,"mouseover",b)}),viettel.Events.addDomListener(this.eventDiv_,
"mouseout",function(b){b=new viettel.MouseEvent(b,a.marker_.getMap(),{x:b.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,y:b.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_);if((a.marker_.getDraggable()||a.marker_.getClickable())&&!e)a.labelDiv_.style.cursor=a.marker_.getCursor(),viettel.Events.trigger(a.marker_,"mouseout",b)}),viettel.Events.addDomListener(this.eventDiv_,"mousedown",function(f){var g=new viettel.MouseEvent(f,a.marker_.getMap(),{x:f.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,
y:f.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_);e=!1;a.marker_.getDraggable()&&(b=!0,a.labelDiv_.style.cursor=l);if(a.marker_.getDraggable()||a.marker_.getClickable())viettel.Events.trigger(a.marker_,"mousedown",g),o(f)}),viettel.Events.addDomListener(document,"mouseup",function(g){var k,j;b&&(k=new viettel.MouseEvent(g,a.marker_.getMap(),{x:g.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,y:g.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_),b=
!1,a.eventDiv_.style.cursor="pointer",viettel.Events.trigger(a.marker_,"mouseup",k));if(e){k=new viettel.MouseEvent(g,a.marker_.getMap(),{x:g.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,y:g.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_);if(i){j=a.getProjection().fromLatLngToDivPixel(a.marker_.getPosition());j.y+=20;a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(j));try{a.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(p,1406)}catch(m){}}a.crossDiv_.style.display=
"none";a.marker_.setZIndex(f);h=!0;e=!1;g.latLng=a.marker_.getPosition();viettel.Events.trigger(a.marker_,"dragend",k)}}),viettel.Events.addListener(a.marker_.getMap(),"mousemove",function(h){var l;b&&(e?(h.latLng=new viettel.LatLng(h.latLng.lat()-g,h.latLng.lng()-k),l=a.getProjection().fromLatLngToDivPixel(h.latLng),i&&(a.crossDiv_.style.left=l.x+"px",a.crossDiv_.style.top=l.y+"px",a.crossDiv_.style.display="",l.y-=20),a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(l)),i&&(a.eventDiv_.style.top=
l.y+20+"px"),viettel.Events.trigger(a.marker_,"drag",h)):(g=h.latLng.lat()-a.marker_.getPosition().lat(),k=h.latLng.lng()-a.marker_.getPosition().lng(),f=a.marker_.getZIndex(),j=a.marker_.getPosition(),m=a.marker_.getMap().getCenter(),i=a.marker_.get("raiseOnDrag"),e=!0,a.marker_.setZIndex(1E6),h.latLng=a.marker_.getPosition(),viettel.Events.trigger(a.marker_,"dragstart",h)))}),viettel.Events.addDomListener(document,"keydown",function(b){e&&27===b.keyCode&&(i=!1,a.marker_.setPosition(j),a.marker_.getMap().setCenter(m),
viettel.Events.trigger(document,"mouseup",b))}),viettel.Events.addDomListener(this.eventDiv_,"click",function(b){var d=new viettel.MouseEvent(b,a.marker_.getMap(),{x:b.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,y:b.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_);if(a.marker_.getDraggable()||a.marker_.getClickable())h?h=!1:(viettel.Events.trigger(a.marker_,"click",d),o(b))}),viettel.Events.addDomListener(this.eventDiv_,"dblclick",function(b){var d=new viettel.MouseEvent(b,
a.marker_.getMap(),{x:b.pageX-a.marker_.getMap().getMapConfig().mapPosition.left,y:b.pageY-a.marker_.getMap().getMapConfig().mapPosition.top},a.marker_);if(a.marker_.getDraggable()||a.marker_.getClickable())viettel.Events.trigger(a.marker_,"dblclick",d),o(b)}),viettel.Events.addListener(this.marker_,"dragstart",function(){e||(i=a.marker_.get("raiseOnDrag"))}),viettel.Events.addListener(this.marker_,"drag",function(){!e&&i&&(a.setPosition(20),a.labelDiv_.style.zIndex=1E6+(a.marker_.get("labelInBackground")?
-1:1))}),viettel.Events.addListener(this.marker_,"dragend",function(){e||i&&a.setPosition(0)}),viettel.Events.addListener(this.marker_,"position_changed",function(){a.setPosition()}),viettel.Events.addListener(this.marker_,"zindex_changed",function(){a.setZIndex()}),viettel.Events.addListener(this.marker_,"visible_changed",function(){a.setVisible()}),viettel.Events.addListener(this.marker_,"labelvisible_changed",function(){a.setVisible()}),viettel.Events.addListener(this.marker_,"title_changed",function(){a.setTitle()}),
viettel.Events.addListener(this.marker_,"labelcontent_changed",function(){a.setContent()}),viettel.Events.addListener(this.marker_,"labelanchor_changed",function(){a.setAnchor()}),viettel.Events.addListener(this.marker_,"labelclass_changed",function(){a.setStyles()}),viettel.Events.addListener(this.marker_,"labelstyle_changed",function(){a.setStyles()})]};this.onRemove=function(){var a;this.labelDiv_.parentNode.removeChild(this.labelDiv_);this.eventDiv_.parentNode.removeChild(this.eventDiv_);for(a=
0;a<this.listeners_.length;a++)viettel.Events.removeListener(this.listeners_[a])}}MarkerLabel_.prototype=new viettel.OverlayView;MarkerLabel_.prototype.constructor=MarkerLabel_;MarkerLabel_.getSharedCross=function(a){var b;"undefined"===typeof MarkerLabel_.getSharedCross.crossDiv&&(b=document.createElement("img"),b.style.cssText="position: absolute; z-index: 1000002; display: none;",b.style.marginLeft="-8px",b.style.marginTop="-9px",b.src=a,MarkerLabel_.getSharedCross.crossDiv=b);return MarkerLabel_.getSharedCross.crossDiv};
MarkerLabel_.prototype.onAdd=function(){};MarkerLabel_.prototype.draw=function(){this.setContent();this.setTitle();this.setStyles()};
MarkerLabel_.prototype.setContent=function(a){if("undefined"==typeof a||null==a){if("undefined"==typeof this.marker_.get("labelContent")||null==this.marker_.get("labelContent")||""==this.marker_.get("labelContent"))return;a=this.marker_.get("labelContent")}"undefined"===typeof a.nodeType?(this.labelDiv_.innerHTML=a,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(a),a=a.cloneNode(!0),this.eventDiv_.appendChild(a))};
MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""};MarkerLabel_.prototype.setStyles=function(){var a,b;this.labelDiv_.className=this.marker_.get("labelClass");this.eventDiv_.className=this.labelDiv_.className;this.labelDiv_.style.cssText="";this.eventDiv_.style.cssText="";b=this.marker_.get("labelStyle");for(a in b)b.hasOwnProperty(a)&&(this.labelDiv_.style[a]=b[a],this.eventDiv_.style[a]=b[a]);this.setMandatoryStyles()};
MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute";this.labelDiv_.style.overflow="hidden";"undefined"!==typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")");this.eventDiv_.style.position=this.labelDiv_.style.position;this.eventDiv_.style.overflow=this.labelDiv_.style.overflow;this.eventDiv_.style.opacity=0.01;this.eventDiv_.style.filter="alpha(opacity=1)";
this.setAnchor();this.setPosition();this.setVisible()};MarkerLabel_.prototype.setAnchor=function(){var a=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-a.x+"px";this.labelDiv_.style.marginTop=-a.y+"px";this.eventDiv_.style.marginLeft=-a.x+"px";this.eventDiv_.style.marginTop=-a.y+"px"};
MarkerLabel_.prototype.setPosition=function(a){var b=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"===typeof a&&(a=0);this.labelDiv_.style.left=Math.round(b.x)+"px";this.labelDiv_.style.top=Math.round(b.y-a)+"px";this.eventDiv_.style.left=this.labelDiv_.style.left;this.eventDiv_.style.top=this.labelDiv_.style.top;this.setZIndex()};
MarkerLabel_.prototype.setZIndex=function(){var a=this.marker_.get("labelInBackground")?-1:1;this.labelDiv_.style.zIndex="undefined"===typeof this.marker_.getZIndex()?parseInt(this.labelDiv_.style.top,10)+a:this.marker_.getZIndex()+a;this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex};MarkerLabel_.prototype.setVisible=function(a){if("undefined"==typeof a||null==a)a=this.marker_.get("labelVisible");this.labelDiv_.style.display=a?a?"block":"none":"none";this.eventDiv_.style.display=this.labelDiv_.style.display};
viettel.LabelMarker=function(a){viettel.Marker.call(this,a);a=a||{};a.labelContent=a.labelContent||"";a.labelAnchor=a.labelAnchor||new viettel.Point(0,0);a.labelClass=a.labelClass||"markerLabels";a.labelStyle=a.labelStyle||{};a.labelInBackground=a.labelInBackground||!1;this.set("labelContent",a.labelContent);this.set("labelAnchor",a.labelAnchor);this.set("labelClass",a.labelClass);this.set("labelStyle",a.labelStyle);this.set("labelInBackground",a.labelInBackground);"undefined"===typeof a.labelVisible&&
(a.labelVisible=!0);"undefined"===typeof a.raiseOnDrag&&(a.raiseOnDrag=!0);"undefined"===typeof a.clickable&&(a.clickable=!0);"undefined"===typeof a.draggable&&(a.draggable=!1);"undefined"===typeof a.optimized&&(a.optimized=!1);a.crossImage=a.crossImage||"http://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png";a.handCursor=a.handCursor||"http://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur";a.optimized=!1;this.set("labelVisible",a.labelVisible);this.set("raiseOnDrag",a.raiseOnDrag);
this.set("clickable",a.clickable);this.set("draggable",a.draggable);this.set("optimized",a.optimized);this.set("crossImage",a.crossImage);this.set("handCursor",a.handCursor);this.set("optimized",a.optimized);this.label=new MarkerLabel_(this,a.crossImage,a.handCursor);this.label.setMap(a.map);this.setMapBase=this.setMap;this.setMap=function(a){this.setMapBase(a);this.label.setMap(a)};this.getLabelContent=function(){return this.get("labelContent")}};viettel.LabelMarker.prototype=new viettel.Marker;
viettel.LabelMarker.prototype.constructor=viettel.LabelMarker;viettel.MarkerManager=function(a,b){var c=this;c.map_=a;c.mapZoom_=a.getZoom();c.projectionHelper_=new ProjectionHelperOverlay(a);viettel.Events.addListener(c.projectionHelper_,"ready",function(){c.projection_=c.projectionHelper_.getProjection();c.initialize(a,b)})};
viettel.MarkerManager.prototype.initialize=function(a,b){var c=this,b=b||{};c.tileSize_=viettel.MarkerManager.DEFAULT_TILE_SIZE_;var d=a.mapTypes,e=1,f;for(f in d)if("object"===typeof a.mapTypes.get(f)&&"number"===typeof a.mapTypes.get(f).maxZoom){var g=a.mapTypes.get(f).maxZoom;g>e&&(e=g)}c.maxZoom_=b.maxZoom||19;c.trackMarkers_=b.trackMarkers;c.show_=b.show||!0;d="number"===typeof b.borderPadding?b.borderPadding:viettel.MarkerManager.DEFAULT_BORDER_PADDING_;c.swPadding_=new viettel.Size(-d,d);c.nePadding_=
new viettel.Size(d,-d);c.borderPadding_=d;c.gridWidth_={};c.grid_={};c.grid_[c.maxZoom_]={};c.numMarkers_={};c.numMarkers_[c.maxZoom_]=0;c.isLoadedMap=!1;viettel.Events.addListener(a,"dragend",function(){c.onMapMoveEnd_()});viettel.Events.addListener(a,"idle",function(){c.isLoadedMap=!0;c.onMapMoveEnd_()});viettel.Events.addListener(a,"zoom_changed",function(){c.onMapMoveEnd_()});var k=setInterval(function(){c.isLoadedMap?clearInterval(k):a.loadedMap&&(c.isLoadedMap=!0,c.onMapMoveEnd_(),clearInterval(k))},
100);c.removeOverlay_=function(a){a.setMap(null);c.shownMarkers_--;viettel.Events.clearListeners(a)};c.addOverlay_=function(a){c.show_&&(a.setMap(c.map_),c.shownMarkers_++)};c.resetManager_();c.shownMarkers_=0;c.shownBounds_=c.getMapGridBounds_();viettel.Events.trigger(c,"loaded")};viettel.MarkerManager.DEFAULT_TILE_SIZE_=1024;viettel.MarkerManager.DEFAULT_BORDER_PADDING_=100;viettel.MarkerManager.MERCATOR_ZOOM_LEVEL_ZERO_RANGE=256;viettel.MarkerManager.prototype.getMarkerByIndex=function(a){return a};
viettel.MarkerManager.prototype.getAllMarkersByZoom=function(a){var b=[],c=0,c=null!=a||""!=a?a:this.map_.getZoom(),a=this.grid_[c],d;for(d in a)for(var c=a[d],e=0;e<c.length;e++)if("undefined"!=typeof c[e])for(var f=0;f<c[e].length;f++)b.push(c[e][f]);return b};viettel.MarkerManager.prototype.resetManager_=function(){for(var a=viettel.MarkerManager.MERCATOR_ZOOM_LEVEL_ZERO_RANGE,b=0;b<=this.maxZoom_;++b)this.grid_[b]={},this.numMarkers_[b]=0,this.gridWidth_[b]=Math.ceil(a/this.tileSize_),a<<=1};
viettel.MarkerManager.prototype.clearMarkers=function(){this.processAll_(this.shownBounds_,this.removeOverlay_);this.resetManager_()};viettel.MarkerManager.prototype.getTilePoint_=function(a,b,c){a=this.projectionHelper_.LatLngToPixel(a,b);return new viettel.Point(Math.floor((a.x+c.width)/this.tileSize_),Math.floor((a.y+c.height)/this.tileSize_))};
viettel.MarkerManager.prototype.addMarkerBatch_=function(a,b,c){var d=this,e=a.getPosition();a.MarkerManager_minZoom=b;this.trackMarkers_&&viettel.Events.addListener(a,"changed",function(a,b,c){d.onMarkerMoved_(a,b,c)});for(e=this.getTilePoint_(e,c,new viettel.Size(0,0,0,0));c>=b;c--)this.getGridCellCreate_(e.x,e.y,c).push(a),e.x>>=1,e.y>>=1};
viettel.MarkerManager.prototype.isGridPointVisible_=function(a){var b=this.shownBounds_.minY<=a.y&&a.y<=this.shownBounds_.maxY,c=this.shownBounds_.minX,d=c<=a.x&&a.x<=this.shownBounds_.maxX;!d&&0>c&&(d=this.gridWidth_[this.shownBounds_.z],d=c+d<=a.x&&a.x<=d-1);return b&&d};
viettel.MarkerManager.prototype.onMarkerMoved_=function(a,b,c){for(var d=this.maxZoom_,e=!1,b=this.getTilePoint_(b,d,new viettel.Size(0,0,0,0)),c=this.getTilePoint_(c,d,new viettel.Size(0,0,0,0));0<=d&&(b.x!==c.x||b.y!==c.y);){var f=this.getGridCellNoCreate_(b.x,b.y,d);f&&this.removeFromArray_(f,a)&&this.getGridCellCreate_(c.x,c.y,d).push(a);d===this.mapZoom_&&(this.isGridPointVisible_(b)?this.isGridPointVisible_(c)||(this.removeOverlay_(a),e=!0):this.isGridPointVisible_(c)&&(this.addOverlay_(a),
e=!0));b.x>>=1;b.y>>=1;c.x>>=1;c.y>>=1;--d}e&&this.notifyListeners_()};viettel.MarkerManager.prototype.removeMarker=function(a){for(var b=this.maxZoom_,c=!1,d=this.getTilePoint_(a.getPosition(),b,new viettel.Size(0,0,0,0));0<=b;){var e=this.getGridCellNoCreate_(d.x,d.y,b);e&&this.removeFromArray_(e,a);b===this.mapZoom_&&this.isGridPointVisible_(d)&&(this.removeOverlay_(a),c=!0);d.x>>=1;d.y>>=1;--b}c&&this.notifyListeners_();this.numMarkers_[a.MarkerManager_minZoom]--};
viettel.MarkerManager.prototype.addMarkers=function(a,b,c){null==b&&(b=0);null==c&&(c=21);for(var c=this.getOptMaxZoom_(c),d=a.length-1;0<=d;d--)this.addMarkerBatch_(a[d],b,c);this.numMarkers_[b]+=a.length};viettel.MarkerManager.prototype.getOptMaxZoom_=function(a){return a||this.maxZoom_};viettel.MarkerManager.prototype.getMarkerCount=function(a){for(var b=0,c=0;c<=a;c++)b+=this.numMarkers_[c];return b};
viettel.MarkerManager.prototype.getMarker=function(a,b,c){var d=new viettel.LatLng(a,b),e=this.getTilePoint_(d,c,new viettel.Size(0,0,0,0)),d=new viettel.Marker({position:d}),c=this.getGridCellNoCreate_(e.x,e.y,c);if(void 0!==c)for(e=0;e<c.length;e++)a===c[e].getPosition().lat()&&b===c[e].getPosition().lng()&&(d=c[e]);return d};
viettel.MarkerManager.prototype.addMarker=function(a,b,c){null==b&&(b=0);null==c&&(c=21);c=this.getOptMaxZoom_(c);this.addMarkerBatch_(a,b,c);this.isGridPointVisible_(this.getTilePoint_(a.getPosition(),this.mapZoom_,new viettel.Size(0,0,0,0)))&&b<=this.shownBounds_.z&&this.shownBounds_.z<=c&&(this.addOverlay_(a),this.notifyListeners_());this.numMarkers_[b]++};
function GridBounds(a){this.minX=Math.min(a[0].x,a[1].x);this.maxX=Math.max(a[0].x,a[1].x);this.minY=Math.min(a[0].y,a[1].y);this.maxY=Math.max(a[0].y,a[1].y)}GridBounds.prototype.equals=function(a){return this.maxX===a.maxX&&this.maxY===a.maxY&&this.minX===a.minX&&this.minY===a.minY?!0:!1};GridBounds.prototype.containsPoint=function(a){return this.minX<=a.x&&this.maxX>=a.x&&this.minY<=a.y&&this.maxY>=a.y};
viettel.MarkerManager.prototype.getGridCellCreate_=function(a,b,c){var d=this.grid_[c];if(null!=d){0>a&&(a+=this.gridWidth_[c]);c=d[a];if(!c)return c=d[a]=[],c[b]=[];a=c[b];return!a?c[b]=[]:a}return[]};viettel.MarkerManager.prototype.getGridCellNoCreate_=function(a,b,c){var d=this.grid_[c];0>a&&(a+=this.gridWidth_[c]);return(a=d[a])?a[b]:void 0};
viettel.MarkerManager.prototype.getGridBounds_=function(a,b,c,d){var b=Math.min(b,this.maxZoom_),e=a.getSouthWest(),a=a.getNorthEast(),c=this.getTilePoint_(e,b,c),d=this.getTilePoint_(a,b,d),f=this.gridWidth_[b];if(a.lng()<e.lng()||d.x<c.x)c.x-=f;d.x-c.x+1>=f&&(c.x=0,d.x=f-1);e=new GridBounds([c,d]);e.z=b;return e};viettel.MarkerManager.prototype.getMapGridBounds_=function(){return this.getGridBounds_(this.map_.getBounds(),this.mapZoom_,this.swPadding_,this.nePadding_)};
viettel.MarkerManager.prototype.onMapMoveEnd_=function(){this.objectSetTimeout_(this,this.updateMarkers_,0)};viettel.MarkerManager.prototype.objectSetTimeout_=function(a,b,c){return window.setTimeout(function(){b.call(a)},c)};viettel.MarkerManager.prototype.visible=function(){return this.show_?!0:!1};viettel.MarkerManager.prototype.isHidden=function(){return!this.show_};viettel.MarkerManager.prototype.show=function(){this.show_=!0;this.refresh()};
viettel.MarkerManager.prototype.hide=function(){this.show_=!1;this.refresh()};viettel.MarkerManager.prototype.toggle=function(){this.show_=!this.show_;this.refresh()};viettel.MarkerManager.prototype.refresh=function(){0<this.shownMarkers_&&this.processAll_(this.shownBounds_,this.removeOverlay_);this.show_&&this.processAll_(this.shownBounds_,this.addOverlay_);this.notifyListeners_()};
viettel.MarkerManager.prototype.updateMarkers_=function(){this.mapZoom_=this.map_.getZoom();var a=this.getMapGridBounds_();a.equals(this.shownBounds_)&&a.z===this.shownBounds_.z||(a.z!==this.shownBounds_.z?(this.processAll_(this.shownBounds_,this.removeOverlay_),this.show_&&this.processAll_(a,this.addOverlay_)):(this.rectangleDiff_(this.shownBounds_,a,this.removeCellMarkers_),this.show_&&this.rectangleDiff_(a,this.shownBounds_,this.addCellMarkers_)),this.shownBounds_=a,this.notifyListeners_())};
viettel.MarkerManager.prototype.notifyListeners_=function(){viettel.Events.trigger(this,"changed",this.shownBounds_,this.shownMarkers_)};viettel.MarkerManager.prototype.processAll_=function(a,b){for(var c=a.minX;c<=a.maxX;c++)for(var d=a.minY;d<=a.maxY;d++)this.processCellMarkers_(c,d,a.z,b)};viettel.MarkerManager.prototype.processCellMarkers_=function(a,b,c,d){if(a=this.getGridCellNoCreate_(a,b,c))for(b=a.length-1;0<=b;b--)d(a[b])};
viettel.MarkerManager.prototype.removeCellMarkers_=function(a,b,c){this.processCellMarkers_(a,b,c,this.removeOverlay_)};viettel.MarkerManager.prototype.addCellMarkers_=function(a,b,c){this.processCellMarkers_(a,b,c,this.addOverlay_)};viettel.MarkerManager.prototype.rectangleDiff_=function(a,b,c){var d=this;d.rectangleDiffCoords_(a,b,function(b,f){c.apply(d,[b,f,a.z])})};
viettel.MarkerManager.prototype.rectangleDiffCoords_=function(a,b,c){var d=a.minX,e=a.minY,f=a.maxX,a=a.maxY,g=b.minX,k=b.minY,h=b.maxX,b=b.maxY,i,j;for(i=d;i<=f;i++){for(j=e;j<=a&&j<k;j++)c(i,j);for(j=Math.max(b+1,e);j<=a;j++)c(i,j)}for(j=Math.max(e,k);j<=Math.min(a,b);j++){for(i=Math.min(f+1,g)-1;i>=d;i--)c(i,j);for(i=Math.max(d,h+1);i<=f;i++)c(i,j)}};viettel.MarkerManager.prototype.removeFromArray_=function(a,b,c){for(var d=0,e=0;e<a.length;++e)if(a[e]===b||c&&a[e]===b)a.splice(e--,1),d++;return d};
ProjectionHelperOverlay.prototype=new viettel.OverlayView;ProjectionHelperOverlay.prototype.constructor=ProjectionHelperOverlay;function ProjectionHelperOverlay(a){viettel.OverlayView.call(this);this._map=a;this._X0=this._Y0=this._X1=this._Y1=this._zoom=-1;this.draw=function(){this.ready||(this.ready=!0,viettel.Events.trigger(this,"ready"))};this.setMap(a)}ProjectionHelperOverlay.prototype.LngToX_=function(a){return 1+a/180};
ProjectionHelperOverlay.prototype.LatToY_=function(a){a=Math.sin(a*Math.PI/180);return 1-0.5/Math.PI*Math.log((1+a)/(1-a))};ProjectionHelperOverlay.prototype.LatLngToPixel=function(a,b){this.getProjection().fromLatLngToDivPixel(a);return{x:~~(0.5+this.LngToX_(a.lng())*(2<<b+6)),y:~~(0.5+this.LatToY_(a.lat())*(2<<b+6))}};function DrawingPolyline(a){var b=a.getMap(),c=this,d=a.getClickable(),e=OpenLayersEX_ImgLoc+"polylineMarker.png",f=!0;this.disableMovingEvent=function(){f=!1};var g=!0;this.disableDrawLine=function(){g=f=!1};var k,h=!1,i=!0,j=[],m=[],l;this.init=function(){b.setOptions({disableDoubleClickZoom:!0});a.setClickable(!1);f&&(k=new viettel.Polyline({strokeColor:"#FF0000",strokeOpacity:0.8,clickable:!1,strokeWeight:1,clickable:!1}),k.setMap(b));if(0<a.getPath().getLength()){t();for(var c=0;c<a.getPath().getLength();c++)u(a.getPath().getAt(c)),
1<a.getPath().getLength()&&c<a.getPath().getLength()-1&&q(a.getPath().getAt(c),a.getPath().getAt(c+1),c)}g&&(n(),x())};var o,p,n=function(){o=viettel.Events.addListener(b,"click",function(b){y(b.latLng);viettel.Events.trigger(a,"addPoint",b)})},x=function(){p=viettel.Events.addListener(b,"dblclick",function(){c.onCompleDraw()})},y=function(b){z(b);setTimeout(function(){u(b)},200);1<a.getPath().getLength()&&q(a.getPath().getAt(a.getPath().getLength()-1),a.getPath().getAt(a.getPath().getLength()-2),
a.getPath().getLength()-2)};this.onCompleDraw=function(){g&&(a.setClickable(d),a.setDrawingState(!1),viettel.Events.removeListener(o),viettel.Events.removeListener(p),viettel.Events.removeListener(l),k.setMap(null),setTimeout(function(){a.setEditable(!0);b.setOptions({disableDoubleClickZoom:!1});viettel.Events.trigger(a,"endDraw")},400));setTimeout(s,400);setTimeout(v,400)};this.disableEditable=function(){s();v()};var s=function(){for(var a=0;a<j.length;a++)j[a].setMap(null),viettel.Events.clearListeners(j[a])},
v=function(){for(var a=0;a<m.length;a++)m[a].setMap(null),viettel.Events.clearListeners(m[a])},z=function(b){a.getPath().push(b);t()},t=function(){if(f){var c=a.getPath().getAt(a.getPath().getLength()-1);k.getPath().clear();h=!1;k.getPath().push(c);i&&(i=!1,l=viettel.Events.addListener(b,"mousemove",function(a){h&&k.getPath().pop();h=!0;k.getPath().push(a.latLng)}))}},u=function(a){var c=new viettel.Marker;c.setMap(b);c.setPosition(a);c.setDraggable(!0);c.setIcon(new viettel.MarkerImage(e,null,null,
new viettel.Point(5,5),new viettel.Size(10,10)));j.push(c);viettel.Events.addListener(c,"dragend",w)},q=function(a,c,d){c=r(a,c);a=new viettel.Marker;a.setMap(b);a.setPosition(c);a.setDraggable(!0);a.setIcon(new viettel.MarkerImage(e,null,null,new viettel.Point(5,5),new viettel.Size(10,10)));m.splice(d,0,a);for(d=0;d<m.length;d++);viettel.Events.addListener(a,"dragend",A)},w=function(b){var c=j.indexOf(this);a.getPath().removeAt(c);a.getPath().insertAt(c,b.latLng);if(c<j.length-1){var d=r(j[c].getPosition(),
j[c+1].getPosition());m[c].setPosition(d)}0<c&&(d=r(j[c-1].getPosition(),j[c].getPosition()),m[c-1].setPosition(d));c==j.length-1&&(b=b.latLng,f&&(k.getPath().removeAt(0),k.getPath().insertAt(0,b)));viettel.Events.trigger(a,"endEdit")},A=function(b){var c=m.indexOf(this);a.getPath().insertAt(c+1,b.latLng);j.splice(c+1,0,this);m.splice(c,1);viettel.Events.clearListeners(this,"dragend");viettel.Events.addListener(this,"dragend",w);q(j[c].getPosition(),j[c+1].getPosition(),c);q(j[c+1].getPosition(),
j[c+2].getPosition(),c+1);viettel.Events.trigger(a,"endEdit")},r=function(a,b){return new viettel.LatLng((a.lat()+b.lat())/2,(a.lng()+b.lng())/2)}};
}
if (!isIEBrowser()){initGMap();}
