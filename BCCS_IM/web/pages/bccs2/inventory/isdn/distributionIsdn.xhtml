<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:pe="http://primefaces.org/ui/extensions"
        xmlns:p="http://primefaces.org/ui"
        xmlns:o="http://omnifaces.org/ui"
        xmlns:cbs="http://java.sun.com/jsf/composite/tags"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        template="../../sentinel/template.xhtml">
    <ui:define name="title">#{lang['mn.isdn.distribute']}</ui:define>
    <ui:define name="content">
        <h:form id="frmAssignStatus">

            <h:panelGrid styleClass="Container100">
                <!-- message thong bao -->
                <p:tabView id="numberTabView" dynamic="true" tabindex="#{distributionIsdnController.tabIndex}">
                    <p:ajax event="tabChange" listener="#{distributionIsdnController.clearListPreview}"
                            update="@([id$=lstIsdn]),@([id$=lstIsdnFIle])"/>
                    <p:tab id="defineSpaceTab" title="#{lang['im.number.assign.status.by.range']}">
                        <div class="ContainerIndent pd-bottom-0 mg-bottom-0">
                            <p:messages id="messageRange" showDetail="true" showSummary="false" closable="true"/>
                        </div>
                        <p:outputPanel id="pnSelectTypeData" styleClass="ContainerIndent">
                            <cbs:panel classForToggle="panelInforExport"
                                       toggle="true"
                                       titleHeader="#{lang['entered.data.detail']}"/>

                            <div class="Container100 panelSelectTypeData" style="margin-bottom: 10px;margin-top: 10px;">
                                <p:outputPanel id="pnPreviewRanges" styleClass="ContainerIndent mg-top-0">
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel typeServiceTxt"
                                                           value="#{lang['mn.stock.type.service']}"
                                                           for="typeServiceTxt"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="typeServiceTxt"
                                                             styleClass="typeServiceTxt"
                                                             placeholder="#{lang['export.order.code.placehoder']}"
                                                             required="true"
                                                             value="#{distributionIsdnController.inputByRange.telecomServiceId}"
                                                             requiredMessage="#{lang['ws.service.type.not.null']}">
                                                <f:selectItems value="#{distributionIsdnController.listService}"
                                                               var="service" itemLabel="#{service.name}"
                                                               itemValue="#{service.value}"/>
                                            </p:selectOneMenu>
                                            <p:message for="typeServiceTxt"/>
                                        </div>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel fromNumberTxt"
                                                           value="#{lang['from.number']}"
                                                           for="fromNumberTxt"/>
                                        </div>
                                        <pe:keyFilter mask="num" preventPaste="false" for="fromNumberTxt,toNumberTxt"/>

                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:inputText id="fromNumberTxt"
                                                         styleClass="fromNumberTxt"
                                                         placeholder="#{lang['digital.start.ranges.placeholder']}"
                                                         required="true"
                                                         onchange="this.value=this.value.replace(new RegExp('[^0-9]|^0+','gm'),'').trim()"
                                                         maxlength="11"
                                                         value="#{distributionIsdnController.inputByRange.startRange}"
                                                         requiredMessage="#{lang['from.number']} #{lang['is.not.null']}">
                                            </p:inputText>
                                            <p:message for="fromNumberTxt"/>
                                        </div>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel toNumberTxt"
                                                           value="#{lang['to.number']}"
                                                           for="toNumberTxt"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:inputText id="toNumberTxt"
                                                         styleClass="toNumberTxt"
                                                         placeholder="#{lang['digital.end.ranges.placeholder']}"
                                                         onchange="this.value=this.value.replace(new RegExp('[^0-9]|^0+','gm'),'').trim()"
                                                         value="#{distributionIsdnController.inputByRange.endRange}"
                                                         required="true"
                                                         maxlength="11"
                                                         requiredMessage="#{lang['to.number']} #{lang['is.not.null']}">
                                            </p:inputText>
                                            <p:message for="toNumberTxt"/>
                                        </div>
                                    </div>
                                </p:outputPanel>

                                <p:outputPanel id="pnPreviewRange2" styleClass="ContainerIndent mg-top-0">
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel cbxTypeReceiveStock"
                                                           value="#{lang['type.receive.stock']}"
                                                           for="cbxTypeReceiveStock"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="cbxTypeReceiveStock"
                                                             styleClass="cbxTypeReceiveStock"
                                                             value="#{distributionIsdnController.inputByRange.toOwnerType}"
                                                             required="true"
                                                             requiredMessage="#{lang['type.receive.stock']} #{lang['is.not.null']}">
                                                <f:selectItem itemLabel="#{lang['shop.stock']}" itemValue="1"/>
                                                <f:selectItem itemLabel="#{lang['staff.stock']}" itemValue="2"/>
                                                <p:ajax event="change" process="@this" update="cellReceiptStock"
                                                        listener="#{distributionIsdnController.onChangeTypeReceiptStock}"/>
                                            </p:selectOneMenu>
                                            <p:message for="cbxTypeReceiveStock"/>
                                        </div>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <p:outputPanel id="cellReceiptStock" class="Container100">
                                            <cbs:inputShop value="#{distributionIsdnController.shopReceiveInfoTag}"
                                                           id="inputStore"
                                                           idComponent="inputStore"
                                                           methodName="receiveStock"
                                                           clearMethodName="receiveClearReceiveShop"
                                                           forceSelection="true"
                                                           rendered="#{empty distributionIsdnController.inputByRange.toOwnerType or distributionIsdnController.inputByRange.toOwnerType eq '1'}"
                                                           update="@this"
                                                           label="#{lang['receive.stock.no']}"
                                                           require="true"
                                                           placeholder="#{lang['common.search.shop.placehoder']}"
                                                           classDivLabel="Container40 mg-left-15 Responsive50 pd-top-4 receiptStock"
                                                           classDivInput="Container60 Responsive50 ui-fluid receiptStock"
                                                           requiredMessage="#{lang['receive.stock.code.require.msg']}"
                                                           oncomplete="setFocusByClass('inputStaff')">
                                            </cbs:inputShop>
                                            <cbs:inputStaff value="#{distributionIsdnController.staffReceiveInfoTag}"
                                                            id="inputStaff"
                                                            rendered="#{not empty distributionIsdnController.inputByRange.toOwnerType and distributionIsdnController.inputByRange.toOwnerType eq '2'}"
                                                            methodName="receiveStaff"
                                                            clearMethodName="receiveClearReceiveStaff"
                                                            forceSelection="true"
                                                            update="@this"
                                                            label="#{lang['receive.stock.no']}"
                                                            require="true"
                                                            placeholder="#{lang['common.search.staff.placehoder']}"
                                                            classDivLabel="Container40 mg-left-15 Responsive50 pd-top-4 receiptStock"
                                                            classDivInput="Container60 Responsive50 ui-fluid receiptStock"
                                                            requiredMessage="#{lang['receive.stock.code.require.msg']}"
                                                            oncomplete="">
                                            </cbs:inputStaff>
                                        </p:outputPanel>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel cbxReason2"
                                                           value="#{lang['common.reason']}"
                                                           for="cbxReason2"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="cbxReason2"
                                                             styleClass="cbxReason2"
                                                             required="true"
                                                             value="#{distributionIsdnController.inputByRange.reasonId}"
                                                             requiredMessage="#{lang['common.reason']} #{lang['is.not.null']}">
                                                <p:ajax event="change" process="@this"/>
                                                <f:selectItem itemLabel="#{lang['common.reason.placeholder']}"
                                                              noSelectionOption="true"/>
                                                <f:selectItems value="#{distributionIsdnController.listReason}"
                                                               var="reason"
                                                               itemLabel="#{reason.reasonName}"
                                                               itemValue="#{reason.reasonId}"/>
                                            </p:selectOneMenu>
                                            <p:message for="cbxReason2"/>
                                        </div>
                                    </div>
                                </p:outputPanel>

                                <p:outputPanel id="pnGetStockPreview" styleClass="ContainerIndent mg-top-0">
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel cbxTypeGetStock"
                                                           value="#{lang['type.get.stock']}"
                                                           for="cbxTypeGetStock"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="cbxTypeGetStock"
                                                             styleClass="cbxTypeGetStock"
                                                             required="false"
                                                             value="#{distributionIsdnController.inputByRange.fromOwnerType}"
                                                             requiredMessage="#{lang['type.get.stock']} #{lang['is.not.null']}">
                                                <p:ajax event="change" process="@this" update="cellGetStock"
                                                        listener="#{distributionIsdnController.onChangeTypeDeliverStock}"/>
                                                <f:selectItem itemLabel="#{lang['shop.stock']}" itemValue="1"/>
                                                <f:selectItem itemLabel="#{lang['staff.stock']}" itemValue="2"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <p:outputPanel id="cellGetStock" class="Container100">
                                            <cbs:inputShop value="#{distributionIsdnController.shopGetInfoTag}"
                                                           idComponent="inputGetStore"
                                                           id="inputGetStore"
                                                           clearMethodName="receiveClearGetShop"
                                                           rendered="#{empty distributionIsdnController.inputByRange.fromOwnerType or distributionIsdnController.inputByRange.fromOwnerType eq '1'}"
                                                           methodName="getStock"
                                                           update="@this"
                                                           forceSelection="false"
                                                           label="#{lang['get.stock.no']}"
                                                           require="false"
                                                           placeholder="#{lang['common.search.shop.placehoder']}"
                                                           classDivLabel="Container40 mg-left-15 Responsive50 pd-top-4"
                                                           classDivInput="Container60 Responsive50 ui-fluid"
                                                           oncomplete="setFocusByClass('inputStaff')">
                                            </cbs:inputShop>
                                            <cbs:inputStaff value="#{distributionIsdnController.staffGetInfoTag}"
                                                            id="inputGetStaff"
                                                            clearMethodName="receiveClearGetStaff"
                                                            forceSelection="false"
                                                            methodName="getStaff"
                                                            rendered="#{not empty distributionIsdnController.inputByRange.fromOwnerType and distributionIsdnController.inputByRange.fromOwnerType eq '2'}"
                                                            update="@this"
                                                            label="#{lang['get.stock.no']}"
                                                            require="false"
                                                            placeholder="#{lang['common.search.staff.placehoder']}"
                                                            classDivLabel="Container40 mg-left-15 Responsive50 pd-top-4"
                                                            classDivInput="Container60 Responsive50 ui-fluid"
                                                            oncomplete="">
                                            </cbs:inputStaff>
                                        </p:outputPanel>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15">
                                            <p:outputLabel styleClass="lb-sentinel"
                                                           value="#{lang['export.order.note']}"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:inputText placeholder="#{lang['export.order.note.placehoder']}"
                                                         value="#{distributionIsdnController.inputByRange.note}"
                                                         maxlength="500">
                                                <p:ajax event="change" process="@this"/>
                                            </p:inputText>
                                        </div>
                                    </div>
                                </p:outputPanel>

                                <div class="Container100 TexAlCenter mg-top-0">
                                    <p:commandButton
                                            value="#{lang['button.distribution']}"
                                            resetValues="false"
                                            process="@this,@([id$=pnSelectTypeData])"
                                            update="@this,@([id$=pnSelectTypeData]),@([id$=pnLstIsdn]),@([id$=messageRange])"
                                            actionListener="#{distributionIsdnController.distributeNumber()}"/>
                                    <p:commandButton styleClass="mg-left-5"
                                                     value="#{lang['see.previous']}"
                                                     resetValues="false"
                                                     process="@this,@([id$=pnPreviewRanges]),@([id$=pnGetStockPreview]),@([id$=cellReceiptStock]),@([id$=cbxTypeReceiveStock])"
                                                     update="@this,@([id$=pnPreviewRanges]),@([id$=pnLstIsdn]),@([id$=messageRange]),@([id$=pnPreviewRange2])"
                                                     actionListener="#{distributionIsdnController.previewDistributeNumber}">
                                    </p:commandButton>
                                </div>
                            </div>
                        </p:outputPanel>
                        <p:outputPanel id="pnLstIsdn" styleClass="ContainerIndent">
                            <cbs:panel classForToggle="panelListIsdn"
                                       toggle="true"
                                       titleHeader="#{lang['list.isdn']}"/>

                            <div class="Container100 panelListIsdn">
                                <div class="ContainerIndent">
                                    <p:dataTable
                                            id="lstIsdn"
                                            var="item"
                                            resizableColumns="true"
                                            paginator="#{lang['common.paging.paginator']}"
                                            rows="#{lang['common.paging.rows.default']}"
                                            rowsPerPageTemplate="#{lang['common.paging.rowsPerPageTemplate']}"
                                            paginatorAlwaysVisible="#{lang['common.paging.paginatorAlwaysVisible']}"
                                            paginatorPosition="#{lang['common.paging.paginatorPosition']}"
                                            paginatorTemplate="#{lang['common.paging.paginatorTemplate']}"
                                            currentPageReportTemplate="#{lang['common.paging.currentPageReportTemplate']}"
                                            emptyMessage="#{lang['common.empty.records']}"
                                            value="#{distributionIsdnController.listIsdnPreview}">
                                        <p:column headerText="#{lang['mn.stock.type.service']}"
                                                  sortBy="#{distributionIsdnController.getTypeNumberName(item[2])}">
                                            <p:outputLabel
                                                    value="#{distributionIsdnController.getTypeNumberName(item[2])}"
                                                    title="#{distributionIsdnController.getTypeNumberName(item[2])}"
                                                    />
                                        </p:column>
                                        <p:column headerText="#{lang['from.number']}" sortBy="#{item[3]}">
                                            <p:outputLabel value="#{item[3]}" title="#{item[3]}"
                                                    />
                                        </p:column>
                                        <p:column headerText="#{lang['to.number']}" sortBy="#{item[4]}">
                                            <p:outputLabel value="#{item[4]}" title="#{item[4]}"
                                                    />
                                        </p:column>
                                        <p:column headerText="#{lang['common.number']}" sortBy="#{item[5]}"
                                                  style="text-align: right">
                                            <p:outputLabel value="#{item[5]}" title="#{item[5]}"
                                                           style="text-align: right"/>
                                        </p:column>
                                        <p:column headerText="#{lang['get.stock.no']}" sortBy="#{item[0]} - #{item[1]}">
                                            <p:outputLabel value="#{item[0]} - #{item[1]}"
                                                           title="#{item[0]} - #{item[1]}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['receive.stock.no']}"
                                                  sortBy="#{distributionIsdnController.inputByRangeForDistribute.toOwnerCode} - #{distributionIsdnController.inputByRangeForDistribute.toOwnerName}">
                                            <p:outputLabel
                                                    value="#{distributionIsdnController.inputByRangeForDistribute.toOwnerCode} - #{distributionIsdnController.inputByRangeForDistribute.toOwnerName}"
                                                    title="#{distributionIsdnController.inputByRangeForDistribute.toOwnerCode} - #{distributionIsdnController.inputByRangeForDistribute.toOwnerName}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['common.status']}"
                                                  sortBy="#{distributionIsdnController.getStatusDigitalName(item[6])}">
                                            <p:outputLabel
                                                    value="#{distributionIsdnController.getStatusDigitalName(item[6])}"
                                                    title="#{distributionIsdnController.getStatusDigitalName(item[6])}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['export.order.name']}" sortBy="#{item[9]}">
                                            <p:outputLabel value="#{item[9]}" title="#{item[9]}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['rule.nice.digit']}" sortBy="#{item[10]}">
                                            <p:outputLabel value="#{item[10]}" title="#{item[10]}"/>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </div>
                        </p:outputPanel>
                    </p:tab>
                    <p:tab id="openSpaceTab" title="#{lang['im.number.assign.status.by.file']}">
                        <div class="ContainerIndent pd-bottom-0 mg-bottom-0">
                            <p:messages id="messageFile" showDetail="true" showSummary="false" closable="true"/>
                        </div>
                        <p:outputPanel styleClass="ContainerIndent" id="pnlFile">
                            <cbs:panel classForToggle="panelInforExport"
                                       toggle="true"
                                       titleHeader="#{lang['entered.data.detail']}"/>

                            <div class="Container100 panelSelectTypeData" style="margin-bottom: 10px;margin-top: 10px;">
                                <p:outputPanel id="pnPreviewFile" class="ContainerIndent mg-top-0">
                                    <div class="Container33 Responsive"
                                         style="margin-top: 10px!important;">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel typeServiceTxt"
                                                           value="#{lang['mn.stock.type.service']}"
                                                           for="typeServiceTxtFile"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="typeServiceTxtFile"
                                                             styleClass="typeServiceTxt"
                                                             placeholder="#{lang['export.order.code.placehoder']}"
                                                             required="true"
                                                             value="#{distributionIsdnController.inputByFile.telecomServiceId}"
                                                             requiredMessage="#{lang['ws.service.type.not.null']}">
                                                <f:selectItems value="#{distributionIsdnController.listService}"
                                                               var="service" itemLabel="#{service.name}"
                                                               itemValue="#{service.value}"/>
                                                <f:ajax event="change" process="@this" update="@this"/>
                                            </p:selectOneMenu>
                                            <p:message for="typeServiceTxtFile"/>
                                        </div>
                                    </div>
                                    <div class="Container33 Responsive" style="margin-top: 10px!important;">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel outputAttachFile"
                                                           value="#{lang['attach.file']}"
                                                           for="fileAttach"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:inputText id="outputAttachFile"
                                                         styleClass="outputAttachFile"
                                                         maxlength="100"
                                                         required="true"
                                                         requiredMessage="#{lang['mn.isdn.rule.invalid.file.type']}"
                                                         placeholder="#{lang['search.number.range.input.fileName']}"
                                                         value="#{distributionIsdnController.attachFileName}"
                                                         readonly="true"/>
                                        </div>
                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container100">
                                            <p:fileUpload id="fileAttach"
                                                          process="@this" styleClass="abc" style="margin: 1px;"
                                                          update="@this, @([id$=outputAttachFile]),@([id$=pnDown]),@([id$=messageFile])"
                                                          dragDropSupport="true" required="true" mode="advanced"
                                                          auto="true"
                                                          allowTypes="/(\.|\/)(xls|xlsx)$/"
                                                          invalidFileMessage="#{lang['mn.isdn.rule.invalid.file.type']}"
                                                          value="#{distributionIsdnController.uploadedFile}"
                                                          fileUploadListener="#{distributionIsdnController.fileUploadAction}">
                                            </p:fileUpload>
                                        </div>
                                    </div>
                                </p:outputPanel>

                                <p:outputPanel id="pnPreviewFile2" class="ContainerIndent mg-top-0">
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel cbxTypeStock"
                                                           value="#{lang['type.stock']}"
                                                           for="cbxTypeStock"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="cbxTypeStock"
                                                             styleClass="cbxTypeStock"
                                                             required="true"
                                                             value="#{distributionIsdnController.inputByFile.toOwnerType}"
                                                             requiredMessage="#{lang['type.stock']} #{lang['is.not.null']}">
                                                <f:selectItem itemLabel="#{lang['shop.stock']}" itemValue="1"/>
                                                <f:selectItem itemLabel="#{lang['staff.stock']}" itemValue="2"/>
                                            </p:selectOneMenu>
                                            <p:message for="cbxTypeStock"/>
                                        </div>

                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50 mg-left-15 pd-top-7">
                                            <p:outputLabel styleClass="lb-sentinel cbxReason"
                                                           value="#{lang['common.reason']}"
                                                           for="cbxReason"/>
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:selectOneMenu id="cbxReason"
                                                             styleClass="cbxReason"
                                                             required="true"
                                                             requiredMessage="#{lang['common.reason']} #{lang['is.not.null']}"
                                                             value="#{distributionIsdnController.inputByFile.reasonId}">
                                                <p:ajax event="change" process="@this"/>
                                                <f:selectItem itemLabel="#{lang['common.reason.placeholder']}"
                                                              noSelectionOption="true"/>
                                                <f:selectItems value="#{distributionIsdnController.listReason}"
                                                               var="reason"
                                                               itemLabel="#{reason.reasonName}"
                                                               itemValue="#{reason.reasonId}"/>
                                            </p:selectOneMenu>
                                            <p:message for="cbxReason"/>
                                        </div>

                                    </div>
                                    <div class="Container33 Responsive">
                                        <div class="Container40 Responsive50">
                                            <p:outputLabel styleClass="lb-sentinel notesFile"
                                                           value="#{lang['export.order.note']}"
                                                    />
                                        </div>
                                        <div class="Container60 Responsive50 ui-fluid">
                                            <p:inputText id="notesFile" styleClass="notesFile"
                                                         value="#{distributionIsdnController.inputByFile.note}"
                                                         maxlength="500"
                                                         placeholder="#{lang['export.order.note.placehoder']}"/>
                                        </div>
                                    </div>
                                </p:outputPanel>

                                <div class="ContainerIndent mg-top-0">
                                    <div class="Container100">
                                        <p:outputPanel id="pnDown">
                                            <p:commandLink
                                                    id="btnDownloadTemplate"
                                                    value="#{lang['mn.stock.status.isdn.update.status.file_template']}"
                                                    rendered="#{!distributionIsdnController.hasFileError}"
                                                    title="#{lang['create.note.download.file.title']}"
                                                    ajax="false"
                                                    immediate="true"
                                                    style="text-decoration: none!important;">
                                                <p:fileDownload
                                                        value="#{distributionIsdnController.downloadFileTemplate()}"/>
                                            </p:commandLink>
                                            <p:commandLink
                                                    id="bthDownloadError"
                                                    value="#{lang['mn.stock.status.isdn.update.status.file_error']}"
                                                    rendered="#{distributionIsdnController.hasFileError}"
                                                    title="#{lang['create.note.download.file.title']}"
                                                    ajax="false"
                                                    immediate="true"
                                                    style="text-decoration: none!important;">
                                                <p:fileDownload
                                                        value="#{distributionIsdnController.downloadFileError()}"/>
                                            </p:commandLink>
                                        </p:outputPanel>
                                    </div>
                                </div>
                            </div>
                            <div class="Container100 TexAlCenter mg-top-0">
                                <p:commandButton
                                        value="#{lang['button.distribution']}"
                                        resetValues="false"
                                        process="@this,@([id$=pnlFile])"
                                        update="@this,@([id$=pnlFile]),@([id$=pnLstIsdnFile]),@([id$=messageFile]),@([id$=pnDown])"
                                        actionListener="#{distributionIsdnController.distributeNumberByFile}"
                                        />
                                <p:commandButton styleClass="mg-left-5"
                                                 process="@this,@([id$=pnPreviewFile]),@([id$=cbxTypeStock])"
                                                 resetValues="false"
                                                 update="@this,@([id$=pnPreviewFile]),@([id$=pnPreviewFile2]),@([id$=pnLstIsdnFile]),@([id$=messageFile]),@([id$=pnDown])"
                                                 actionListener="#{distributionIsdnController.previewDistributeNumberByFile}"
                                                 value="#{lang['see.previous']}"/>
                            </div>
                        </p:outputPanel>
                        <p:outputPanel id="pnLstIsdnFile" styleClass="ContainerIndent">
                            <cbs:panel classForToggle="panelListIsdn"
                                       toggle="true"
                                       titleHeader="#{lang['list.isdn']}"/>

                            <div class="Container100 panelListIsdn">
                                <div class="ContainerIndent">
                                    <p:dataTable
                                            id="lstIsdnFIle"
                                            var="item"
                                            resizableColumns="true"
                                            paginator="#{lang['common.paging.paginator']}"
                                            rows="#{lang['common.paging.rows.default']}"
                                            rowsPerPageTemplate="#{lang['common.paging.rowsPerPageTemplate']}"
                                            paginatorAlwaysVisible="#{lang['common.paging.paginatorAlwaysVisible']}"
                                            paginatorPosition="#{lang['common.paging.paginatorPosition']}"
                                            paginatorTemplate="#{lang['common.paging.paginatorTemplate']}"
                                            currentPageReportTemplate="#{lang['common.paging.currentPageReportTemplate']}"
                                            emptyMessage="#{lang['common.empty.records']}"
                                            value="#{distributionIsdnController.listIsdnPreview}">
                                        <p:column headerText="#{lang['mn.stock.type.service']}"
                                                  sortBy="#{distributionIsdnController.getTypeNumberName(item[2])}">
                                            <p:outputLabel
                                                    value="#{distributionIsdnController.getTypeNumberName(item[2])}"
                                                    title="#{distributionIsdnController.getTypeNumberName(item[2])}"
                                                    />
                                        </p:column>
                                        <p:column headerText="#{lang['from.number']}" sortBy="#{item[3]}">
                                            <p:outputLabel value="#{item[3]}" title="#{item[3]}"
                                                    />
                                        </p:column>
                                        <p:column headerText="#{lang['to.number']}" sortBy="#{item[4]}">
                                            <p:outputLabel value="#{item[4]}" title="#{item[4]}"
                                                    />
                                        </p:column>
                                        <p:column headerText="#{lang['common.number']}" sortBy="#{item[5]}"
                                                  style="text-align: right">
                                            <p:outputLabel value="#{item[5]}" title="#{item[5]}"
                                                           style="text-align: right"/>
                                        </p:column>
                                        <p:column headerText="#{lang['get.stock.no']}"
                                                  sortBy="#{item[0]} - #{item[1]}">
                                            <p:outputLabel value="#{item[0]} - #{item[1]}"
                                                           title="#{item[0]} - #{item[1]}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['receive.stock.no']}"
                                                  sortBy="#{item[12]}">
                                            <p:outputLabel value="#{item[12]}" title="#{item[12]}"/>

                                        </p:column>

                                        <p:column headerText="#{lang['common.status']}"
                                                  sortBy="#{distributionIsdnController.getStatusDigitalName(item[6])}">
                                            <p:outputLabel
                                                    value="#{distributionIsdnController.getStatusDigitalName(item[6])}"
                                                    title="#{distributionIsdnController.getStatusDigitalName(item[6])}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['export.order.name']}"
                                                  sortBy="#{item[9]}">
                                            <p:outputLabel value="#{item[9]}" title="#{item[9]}"/>
                                        </p:column>
                                        <p:column headerText="#{lang['rule.nice.digit']}"
                                                  sortBy="#{item[10]}">
                                            <p:outputLabel value="#{item[10]}" title="#{item[10]}"/>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </div>
                        </p:outputPanel>
                    </p:tab>
                </p:tabView>
            </h:panelGrid>


        </h:form>
    </ui:define>
</ui:composition>
